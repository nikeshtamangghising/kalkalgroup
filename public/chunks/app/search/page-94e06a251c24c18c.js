(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{50684:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var a=t(49095),r=t(28175),l=t(46944),o=t(18417),n=t(54603);let i=(0,r.memo)(e=>{let{searchParams:s}=e,t=(0,l.useRouter)(),i=(0,l.useSearchParams)(),[c,d]=(0,r.useState)(s.q||""),[h,m]=(0,r.useState)([]),[u,x]=(0,r.useState)([]),[p,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(s.q||"")},[s.q]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/search/popular");if(e.ok){let s=await e.json();m(s.searches||[])}}catch(e){m(["Laptop","Headphones","Phone","Watch","Camera","Tablet","Speaker","Mouse"])}})()},[]),(0,r.useEffect)(()=>{""===c.trim()?x(h):x(h.filter(e=>e.toLowerCase().includes(c.toLowerCase())))},[c,h]);let w=(0,r.useCallback)(e=>{if(e.trim()){f(!0);let s=new URLSearchParams(i.toString());s.set("q",e.trim()),s.delete("page"),t.push("/search?".concat(s.toString())),b(!1)}},[t,i]),v={...s,search:s.q};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mb-8 relative",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,a.jsx)(n.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>{let s=e.target.value;d(s),s.length>=0&&b(!0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w(c)),"Escape"===e.key&&b(!1)},onFocus:()=>{u.length>0&&b(!0)},onBlur:()=>{setTimeout(()=>b(!1),200)},className:"block w-full pl-12 pr-4 py-4 text-lg border border-gray-300 rounded-full leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200",placeholder:"Search products...",autoComplete:"off"})]}),(0,a.jsx)("button",{onClick:()=>w(c),disabled:!c.trim()||g,className:"md:hidden flex items-center justify-center px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-full transition-colors shadow-sm hover:shadow-md",children:g?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,a.jsx)(n.A,{className:"h-5 w-5"})})]}),p&&u.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-80 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 px-3 py-2 border-b border-gray-100",children:""===c.trim()?"Popular searches":"Suggestions"}),u.slice(0,8).map((e,s)=>(0,a.jsxs)("button",{onClick:()=>w(e),className:"w-full text-left px-3 py-3 hover:bg-gray-50 transition-colors flex items-center space-x-3 group",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600"}),(0,a.jsx)("span",{className:"text-gray-900 group-hover:text-blue-600",children:""===c.trim()?e:(0,a.jsx)(a.Fragment,{children:e.split(RegExp("(".concat(c,")"),"gi")).map((e,s)=>(0,a.jsx)("span",{className:e.toLowerCase()===c.toLowerCase()?"font-semibold text-blue-600":"",children:e},s))})})]},s)),""!==c.trim()&&!u.some(e=>e.toLowerCase()===c.toLowerCase())&&(0,a.jsxs)("button",{onClick:()=>w(c),className:"w-full text-left px-3 py-3 hover:bg-blue-50 transition-colors flex items-center space-x-3 group border-t border-gray-100",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-blue-500"}),(0,a.jsxs)("span",{className:"text-blue-600 font-medium",children:['Search for "',c,'"']})]})]})})]}),s.q?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("h1",{className:"text-xl font-medium text-gray-900",children:['Search results for "',s.q,'"']})}),(0,a.jsx)(o.default,{searchParams:v})]}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(n.A,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Start typing to search for products"})]})]})});i.displayName="SearchPageClient";let c=i},63622:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,76447,23)),Promise.resolve().then(t.t.bind(t,54968,23)),Promise.resolve().then(t.bind(t,36475)),Promise.resolve().then(t.bind(t,98081)),Promise.resolve().then(t.bind(t,38292)),Promise.resolve().then(t.bind(t,50684)),Promise.resolve().then(t.bind(t,94361))}},e=>{e.O(0,[6447,9885,7640,9851,378,2313,1852,8616,8417,3575,7358],()=>e(e.s=63622)),_N_E=e.O()}]);