(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{2821:(e,r,t)=>{"use strict";function a(){for(var e,r,t=0,a="",s=arguments.length;t<s;t++)(e=arguments[t])&&(r=function e(r){var t,a,s="";if("string"==typeof r||"number"==typeof r)s+=r;else if("object"==typeof r)if(Array.isArray(r)){var i=r.length;for(t=0;t<i;t++)r[t]&&(a=e(r[t]))&&(s&&(s+=" "),s+=a)}else for(a in r)r[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=r);return a}t.d(r,{$:()=>a})},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>l,A:()=>n});var a=t(49095),s=t(28175),i=t(2821);let l=(0,s.forwardRef)((e,r)=>{let{className:t,variant:s="primary",size:l="md",loading:n,children:o,disabled:d,...c}=e,m=(0,i.$)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500 shadow-sm hover:shadow-md",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm hover:shadow-md",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-orange-500 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[l],t),g=(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",suppressHydrationWarning:!0,children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",suppressHydrationWarning:!0}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",suppressHydrationWarning:!0})]}),o]});return(0,a.jsx)("button",{className:m,ref:r,disabled:d||n,...c,suppressHydrationWarning:!0,children:g})});l.displayName="Button";let n=l},10908:(e,r,t)=>{Promise.resolve().then(t.bind(t,64453))},46944:(e,r,t)=>{"use strict";var a=t(53936);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},64453:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(49095),s=t(28175),i=t(46944),l=t(76447),n=t.n(l),o=t(72384),d=t(90856),c=t(3998);let m=["Factory","Production","Products","Team","Awards"],g=(0,s.memo)(()=>{let e=(0,i.useRouter)(),r=(0,i.useParams)().id,[t,l]=(0,s.useState)(null),[g,u]=(0,s.useState)({title:"",description:"",category:"Factory",images:[],isActive:!0}),[h,x]=(0,s.useState)(!0),[p,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!0;return(async()=>{x(!0),b(null);try{let a=await fetch("/api/gallery/".concat(r)),s=await a.json();if(!s.success||!s.data)throw Error(s.error||"Failed to fetch gallery item");if(e){var t;let e=(e=>({id:e.id,title:e.title,description:e.description,category:e.category,imageUrl:e.image_url,isActive:e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}))(s.data);l(e),u({title:e.title,description:null!=(t=e.description)?t:"",category:e.category,images:e.imageUrl?[e.imageUrl]:[],isActive:e.isActive})}}catch(r){e&&(l(null),b(r instanceof Error?r.message:"Failed to fetch gallery item"))}finally{e&&x(!1)}})(),()=>{e=!1}},[r]);let v=e=>{let{name:r,value:t,type:a}=e.target;u(s=>({...s,[r]:"checkbox"===a?e.target.checked:t}))},j=async t=>{t.preventDefault(),y(!0),b(null);try{if(!g.title.trim())throw Error("Title is required");if(!g.description.trim())throw Error("Description is required");let t={title:g.title.trim(),description:g.description.trim(),category:g.category,isActive:g.isActive};g.images.length>0&&g.images[0]&&(t.imageUrl=g.images[0],t.altText=g.title.trim());let a=await fetch("/api/gallery/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();if(s.success)e.push("/admin/gallery");else if(s.needsDatabase)throw Error("Database setup required for editing gallery items. Please set up the database first.");else throw Error(s.error||"Failed to update gallery item")}catch(e){b(e instanceof Error?e.message:"Failed to update gallery item")}finally{y(!1)}};return h?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"bg-gray-200 h-96 rounded-lg"}),(0,a.jsx)("div",{className:"bg-gray-200 h-96 rounded-lg"})]})]})}):f||!t?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:f||"Gallery item not found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:f?"There was an error loading the gallery item.":"The gallery item you're looking for doesn't exist."}),(0,a.jsx)(n(),{href:"/admin/gallery",children:(0,a.jsx)(c.A,{children:"Back to Gallery"})})]})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(n(),{href:"/admin/gallery",children:(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(d.A,{className:"w-5 h-5 text-gray-600"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Gallery Image"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Update gallery image details"})]})]}),f&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800",children:f})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow border p-6",children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:g.title,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter image title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:g.description,onChange:v,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Enter image description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,a.jsx)("select",{id:"category",name:"category",value:g.category,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gallery Image"}),(0,a.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(t){let e=new FileReader;e.onloadend=()=>{u(r=>({...r,images:[e.result]}))},e.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Upload a new image to replace the current one, or keep the existing image."})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:g.isActive,onChange:v,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active (visible in gallery)"})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["Created: ",new Date(t.createdAt).toLocaleString()]}),(0,a.jsxs)("p",{children:["Last updated: ",new Date(t.updatedAt).toLocaleString()]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 pt-6",children:[(0,a.jsx)(c.A,{type:"submit",disabled:p,className:"flex-1",children:p?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Changes"}),(0,a.jsx)(n(),{href:"/admin/gallery",children:(0,a.jsx)(c.A,{variant:"outline",type:"button",children:"Cancel"})})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Preview"}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center relative",children:[g.images.length>0?(0,a.jsx)("img",{src:g.images[0],alt:"Preview",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)(o.A,{className:"w-16 h-16 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No image available"})]}),(0,a.jsxs)("div",{className:"absolute top-2 left-2 flex gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(g.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:g.isActive?"Active":"Inactive"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",children:g.category})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:g.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:g.description})]})]})]})]})]})});g.displayName="EditGalleryPage";let u=g},72384:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(28175);let s=a.forwardRef(function(e,r){let{title:t,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},i),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))})},90856:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(28175);let s=a.forwardRef(function(e,r){let{title:t,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},i),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))})}},e=>{e.O(0,[6447,3575,7358],()=>e(e.s=10908)),_N_E=e.O()}]);