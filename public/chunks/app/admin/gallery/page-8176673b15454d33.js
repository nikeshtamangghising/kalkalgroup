(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3831],{2821:(e,t,a)=>{"use strict";function r(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{$:()=>r})},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,A:()=>n});var r=a(49095),s=a(28175),l=a(2821);let i=(0,s.forwardRef)((e,t)=>{let{className:a,variant:s="primary",size:i="md",loading:n,children:o,disabled:d,...c}=e,m=(0,l.$)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500 shadow-sm hover:shadow-md",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm hover:shadow-md",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-orange-500 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[i],a),g=(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",suppressHydrationWarning:!0,children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",suppressHydrationWarning:!0}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",suppressHydrationWarning:!0})]}),o]});return(0,r.jsx)("button",{className:m,ref:t,disabled:d||n,...c,suppressHydrationWarning:!0,children:g})});i.displayName="Button";let n=i},24646:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(49095),s=a(28175),l=a(72384);let i=e=>{let{imageUrl:t,title:a,category:i,isActive:n=!0}=e,[o,d]=(0,s.useState)(!t),[c,m]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"relative aspect-[4/3] overflow-hidden bg-slate-100",children:[(0,r.jsx)("img",{src:!o&&t?t:"https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=900&q=80",alt:a,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 ".concat(c?"scale-100 opacity-100":"scale-105 opacity-0"),loading:"lazy",onLoad:()=>m(!0),onError:()=>{o||(d(!0),m(!1))}}),!c&&(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-slate-500",children:[(0,r.jsx)(l.A,{className:"h-10 w-10"}),(0,r.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Loading preview…"})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/50 via-slate-900/5 to-transparent pointer-events-none"}),(0,r.jsxs)("div",{className:"absolute top-3 left-3 flex flex-wrap gap-2",children:[(0,r.jsx)("span",{className:"rounded-full px-2.5 py-1 text-xs font-semibold tracking-wide shadow-sm ".concat(n?"bg-emerald-100 text-emerald-900":"bg-slate-200 text-slate-700"),children:n?"Active":"Inactive"}),(0,r.jsx)("span",{className:"rounded-full bg-white/80 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-900 shadow-sm",children:i})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-slate-900/70 to-transparent p-3",children:(0,r.jsx)("p",{className:"text-sm font-semibold text-white line-clamp-1",children:a})})]})}},28598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(49095),s=a(28175),l=a(76447),i=a.n(l),n=a(71594),o=a(77158),d=a(72384),c=a(35658),m=a(3998),g=a(24646);let x=["All","Factory","Production","Products","Team","Awards"],h=(0,s.memo)(()=>{let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[h,u]=(0,s.useState)(null),[f,y]=(0,s.useState)("All"),[p,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{b()},[]);let b=async()=>{l(!0),u(null);try{let e=await fetch("/api/gallery"),a=await e.json();if(a.success)t(a.data),console.log("[AdminGallery] Loaded ".concat(a.data.length," gallery items from database"));else throw Error(a.error||"Failed to fetch gallery items")}catch(e){console.error("Error fetching gallery items:",e),u(e instanceof Error&&e.message||"Failed to fetch gallery items"),t([])}finally{l(!1)}},w=async e=>{if(confirm("Are you sure you want to delete this gallery item? This will also remove the image from cloud storage.")){v(e);try{let a=await fetch("/api/gallery/".concat(e),{method:"DELETE"}),r=await a.json();if(r.success)t(t=>t.filter(t=>t.id!==e)),console.log("[AdminGallery] Successfully deleted gallery item: ".concat(e));else throw Error(r.error||"Failed to delete gallery item")}catch(e){u(e instanceof Error?e.message:"Failed to delete gallery item"),console.error("[AdminGallery] Error deleting gallery item:",e)}finally{v(null)}}},j=async e=>{try{let a=await fetch("/api/gallery/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!e.isActive})}),r=await a.json();if(r.success)t(t=>t.map(t=>t.id===e.id?{...t,isActive:!t.isActive,updatedAt:new Date().toISOString()}:t)),console.log("[AdminGallery] Toggled status for item: ".concat(e.id));else throw Error(r.error||"Failed to update gallery item status")}catch(e){u(e instanceof Error?e.message:"Failed to update gallery item status"),console.error("[AdminGallery] Error updating gallery item status:",e)}},N="All"===f?e:e.filter(e=>e.category===f);return a?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/4 mb-6"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)("div",{className:"bg-gray-200 h-64 rounded-lg"},t))})]})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gallery Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your factory and product gallery images"})]}),(0,r.jsx)(i(),{href:"/admin/gallery/create",children:(0,r.jsxs)(m.A,{className:"flex items-center",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"Add New Image"]})})]}),h&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-red-800",children:h}),(0,r.jsx)("button",{onClick:()=>u(null),className:"text-red-600 hover:text-red-800",children:"✕"})]}),(0,r.jsx)("button",{onClick:b,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Try again"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filter by category:"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,r.jsx)("button",{onClick:()=>y(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(f===e?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Images"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.isActive).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Active Images"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(e=>!e.isActive).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Inactive Images"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:new Set(e.map(e=>e.category)).size}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Categories"})]})]}),0===N.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(d.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:h?"Unable to load gallery items":"No gallery items found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:h?"There was an error connecting to the database. Please check your connection and try again.":"All"===f?"Get started by adding your first gallery image.":'No images found in the "'.concat(f,'" category.')}),!h&&(0,r.jsx)(i(),{href:"/admin/gallery/create",children:(0,r.jsx)(m.A,{children:"Add First Image"})})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow border overflow-hidden flex flex-col",children:[(0,r.jsx)(g.A,{imageUrl:e.imageUrl,title:e.title,category:e.category,isActive:e.isActive}),(0,r.jsxs)("div",{className:"p-5 flex flex-1 flex-col",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description||"No description provided"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mb-4 space-y-1",children:["Created: ",new Date(e.createdAt).toLocaleDateString(),e.updatedAt!==e.createdAt&&(0,r.jsxs)("span",{className:"block",children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"mt-auto flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{onClick:()=>w(e.id),disabled:p===e.id,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Item",children:p===e.id?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(c.A,{className:"w-4 h-4"})})}),(0,r.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 text-xs font-medium rounded-full transition-colors ".concat(e.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:e.isActive?"Deactivate":"Activate"})]})]})]},e.id))})]})});h.displayName="AdminGalleryPage";let u=h},35658:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(28175);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},70073:(e,t,a)=>{Promise.resolve().then(a.bind(a,28598))},71594:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(28175);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},72384:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(28175);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))})},77158:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(28175);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))})}},e=>{e.O(0,[6447,3575,7358],()=>e(e.s=70073)),_N_E=e.O()}]);