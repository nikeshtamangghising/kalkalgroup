(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{3998:(e,s,r)=>{"use strict";r.d(s,{$:()=>n,A:()=>l});var t=r(49095),a=r(28175),i=r(2821);let n=(0,a.forwardRef)((e,s)=>{let{className:r,variant:a="primary",size:n="md",loading:l,children:d,disabled:c,...o}=e,m=(0,i.$)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500 shadow-sm hover:shadow-md",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm hover:shadow-md",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-orange-500 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n],r),x=(0,t.jsxs)(t.Fragment,{children:[l&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",suppressHydrationWarning:!0,children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",suppressHydrationWarning:!0}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",suppressHydrationWarning:!0})]}),d]});return(0,t.jsx)("button",{className:m,ref:s,disabled:c||l,...o,suppressHydrationWarning:!0,children:x})});n.displayName="Button";let l=n},55103:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(49095),a=r(61289),i=r(46944),n=r(28175),l=r(78334);function d(e){let{children:s}=e,{isAuthenticated:r,isAdmin:d,isLoading:c}=(0,a.A)(),o=(0,i.useRouter)(),[m,x]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{u(!0)},[]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{c&&!r&&(x(!0),o.push("/auth/signin?redirect=/admin"))},2e3);return()=>clearTimeout(e)},[c,r,o]),(0,n.useEffect)(()=>{if(!c){if(!r){x(!0),o.push("/auth/signin?redirect=/admin");return}if(!d){x(!0),o.push("/");return}}},[r,d,c,o]),(0,n.useEffect)(()=>{c||r&&d||(r?d||o.push("/"):o.push("/auth/signin?redirect=/admin"))},[r,d,c,o]),!h||m)?null:c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.h,{size:"lg"}),(0,t.jsx)("div",{className:"mt-4 text-gray-600",children:"Verifying admin access..."}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Please wait or"," ",(0,t.jsx)("a",{href:"/auth/signin?redirect=/admin",className:"text-indigo-600 hover:text-indigo-500",children:"click here to sign in"})]})]})}):r&&d?(0,t.jsx)(t.Fragment,{children:s}):null}},61289:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(89885),a=r(28175);function i(){var e,s;let{data:r,status:i}=(0,t.useSession)();(0,a.useEffect)(()=>{},[i,r]);let n=!!(null==r?void 0:r.user),l=(null==r||null==(e=r.user)?void 0:e.role)==="ADMIN",d="loading"===i;return{user:null==r?void 0:r.user,isLoading:d,isAuthenticated:n,isAdmin:l,isCustomer:(null==r||null==(s=r.user)?void 0:s.role)==="CUSTOMER",status:i}}},78334:(e,s,r)=>{"use strict";r.d(s,{h:()=>i});var t=r(49095),a=r(2821);function i(e){let{size:s="md",className:r}=e;return(0,t.jsx)("div",{className:(0,a.$)("animate-spin rounded-full border-2 border-gray-300 border-t-indigo-600",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s],r),suppressHydrationWarning:!0})}},87288:(e,s,r)=>{"use strict";r.d(s,{X:()=>n,z:()=>l});var t=r(49095),a=r(28175);let i=(0,a.createContext)(void 0);function n(e){let{children:s}=e,[r,n]=(0,a.useState)([]),[l,d]=(0,a.useState)(!1),c=async()=>{d(!0);try{let e=await fetch("/api/categories?type=flat&includeInactive=true");if(e.ok){let s=await e.json();console.log("Admin Context - API Response:",s);let r=[];Array.isArray(s)?r=s:s.data&&s.data.categories&&Array.isArray(s.data.categories)?r=s.data.categories:s.categories&&Array.isArray(s.categories)&&(r=s.categories),console.log("Admin Context - Parsed categories:",r),n(r)}else{console.error("Admin Context - API Error:",e.status,e.statusText);let s=await e.text();console.error("Admin Context - Error details:",s)}}catch(e){console.error("Admin Context - Failed to refresh categories:",e)}finally{d(!1)}};return(0,a.useEffect)(()=>{c()},[]),(0,t.jsx)(i.Provider,{value:{categories:r,setCategories:n,refreshCategories:c,isLoading:l,setIsLoading:d},children:s})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAdmin must be used within AdminProvider");return e}},94929:(e,s,r)=>{Promise.resolve().then(r.bind(r,99585))},99585:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>D});var t=r(49095),a=r(55103),i=r(28175),n=r(73285),l=r(59287),d=r(63786),c=r(72384),o=r(65176),m=r(18094),x=r(63944),h=r(79691),u=r(51539),g=r(61449),f=r(17109),p=r(42407),j=r(89885),y=r(61289),b=r(21729),v=r(3998);let N=(0,b.default)(()=>Promise.all([r.e(7640),r.e(2313),r.e(1165)]).then(r.bind(r,11165)),{loadableGenerated:{webpack:()=>[11165]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading dashboard..."})}),w=(0,b.default)(()=>r.e(7632).then(r.bind(r,87632)),{loadableGenerated:{webpack:()=>[87632]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading settings..."})}),A=(0,b.default)(()=>Promise.all([r.e(6447),r.e(7640),r.e(9851),r.e(2313),r.e(777)]).then(r.bind(r,20777)),{loadableGenerated:{webpack:()=>[20777]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading products..."})}),k=(0,b.default)(()=>Promise.all([r.e(6447),r.e(3659)]).then(r.bind(r,53659)),{loadableGenerated:{webpack:()=>[53659]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading brands..."})}),C=(0,b.default)(()=>Promise.all([r.e(6447),r.e(4205)]).then(r.bind(r,64205)),{loadableGenerated:{webpack:()=>[64205]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading categories..."})}),E=(0,b.default)(()=>Promise.all([r.e(6447),r.e(7640),r.e(2313),r.e(5542)]).then(r.bind(r,85542)),{loadableGenerated:{webpack:()=>[85542]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading orders..."})}),P=(0,b.default)(()=>r.e(6369).then(r.bind(r,8750)),{loadableGenerated:{webpack:()=>[8750]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading customers..."})}),S=(0,b.default)(()=>Promise.all([r.e(7640),r.e(2313),r.e(7349)]).then(r.bind(r,57349)),{loadableGenerated:{webpack:()=>[57349]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading analytics..."})}),L=(0,b.default)(()=>r.e(8205).then(r.bind(r,38205)),{loadableGenerated:{webpack:()=>[38205]},loading:()=>(0,t.jsx)("div",{className:"flex justify-center items-center py-16",children:"Loading gallery..."})}),z=[{id:"dashboard",name:"Dashboard",icon:n.A},{id:"products",name:"Products",icon:l.A},{id:"categories",name:"Categories",icon:d.A},{id:"gallery",name:"Gallery",icon:c.A},{id:"brands",name:"Brands",icon:o.A},{id:"orders",name:"Orders",icon:m.A},{id:"customers",name:"Customers",icon:x.A},{id:"analytics",name:"Analytics",icon:h.A},{id:"settings",name:"Settings",icon:u.A}];function G(){var e,s;let[r,a]=(0,i.useState)("dashboard"),[n,l]=(0,i.useState)(!1),{user:d}=(0,y.A)(),c=()=>{(0,j.signOut)({callbackUrl:"/"})};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[n&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>l(!1)}),(0,t.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-200",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-indigo-600",children:"Admin Dashboard"}),(0,t.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-md hover:bg-gray-100",children:(0,t.jsx)(g.A,{className:"h-5 w-5"})})]}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-4 py-6",children:z.map(e=>{let s=r===e.id;return(0,t.jsxs)("button",{onClick:()=>{a(e.id),l(!1)},className:"w-full group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ".concat(s?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900 hover:shadow-sm"),children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5 flex-shrink-0 transition-colors ".concat(s?"text-indigo-500":"text-gray-400 group-hover:text-gray-500")}),(0,t.jsx)("span",{className:"flex-1 text-left",children:e.name}),s&&(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]},e.id)})}),(0,t.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:null==d||null==(e=d.name)?void 0:e.charAt(0).toUpperCase()})})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==d?void 0:d.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)(v.A,{variant:"ghost",size:"sm",onClick:c,className:"w-full justify-start text-gray-700 hover:text-gray-900",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})]})]})})]}),(0,t.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:block lg:w-64 lg:bg-white lg:shadow-lg",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:(0,t.jsx)("div",{className:"text-xl font-bold text-indigo-600",children:"Admin Dashboard"})}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-4 py-6",children:z.map(e=>{let s=r===e.id;return(0,t.jsxs)("button",{onClick:()=>a(e.id),className:"w-full group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ".concat(s?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900 hover:shadow-sm"),children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5 flex-shrink-0 transition-colors ".concat(s?"text-indigo-500":"text-gray-400 group-hover:text-gray-500")}),(0,t.jsx)("span",{className:"flex-1 text-left",children:e.name}),s&&(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]},e.id)})}),(0,t.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:null==d||null==(s=d.name)?void 0:s.charAt(0).toUpperCase()})})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==d?void 0:d.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)(v.A,{variant:"ghost",size:"sm",onClick:c,className:"w-full justify-start text-gray-700 hover:text-gray-900",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})]})]})}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:hidden",children:[(0,t.jsxs)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>l(!0),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,t.jsx)(p.A,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,t.jsx)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"text-lg font-bold text-indigo-600",children:"Admin Dashboard"})})})]}),(0,t.jsx)("main",{className:"py-4 lg:py-6",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(()=>{switch(r){case"dashboard":default:return(0,t.jsx)(N,{onTabChange:e=>a(e)});case"settings":return(0,t.jsx)(w,{});case"products":return(0,t.jsx)(A,{});case"categories":return(0,t.jsx)(C,{});case"gallery":return(0,t.jsx)(L,{});case"brands":return(0,t.jsx)(k,{});case"orders":return(0,t.jsx)(E,{});case"customers":return(0,t.jsx)(P,{});case"analytics":return(0,t.jsx)(S,{})}})()})})]})]})}class O extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}render(){if(this.state.hasError){var e,s;if(this.props.fallback){let e=this.props.fallback;return(0,t.jsx)(e,{error:this.state.error,retry:this.handleRetry})}return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:(null==(s=this.state.error)||null==(e=s.message)?void 0:e.includes("chunk"))?"Failed to load admin components. This might be a network issue.":"An unexpected error occurred in the admin panel."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.A,{onClick:this.handleRetry,className:"w-full",children:"Try Again"}),(0,t.jsx)(v.A,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Reload Page"})]}),!1]})})})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}}var R=r(87288);function D(){return(0,t.jsx)(O,{children:(0,t.jsx)(a.A,{children:(0,t.jsx)(R.X,{children:(0,t.jsx)(G,{})})})})}}},e=>{e.O(0,[9885,2151,3575,7358],()=>e(e.s=94929)),_N_E=e.O()}]);