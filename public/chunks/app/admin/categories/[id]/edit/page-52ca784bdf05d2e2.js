(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4036],{2821:(e,r,a)=>{"use strict";function s(){for(var e,r,a=0,s="",t=arguments.length;a<t;a++)(e=arguments[a])&&(r=function e(r){var a,s,t="";if("string"==typeof r||"number"==typeof r)t+=r;else if("object"==typeof r)if(Array.isArray(r)){var i=r.length;for(a=0;a<i;a++)r[a]&&(s=e(r[a]))&&(t&&(t+=" "),t+=s)}else for(s in r)r[s]&&(t&&(t+=" "),t+=s);return t}(e))&&(s&&(s+=" "),s+=r);return s}a.d(r,{$:()=>s})},3998:(e,r,a)=>{"use strict";a.d(r,{$:()=>n,A:()=>o});var s=a(49095),t=a(28175),i=a(2821);let n=(0,t.forwardRef)((e,r)=>{let{className:a,variant:t="primary",size:n="md",loading:o,children:d,disabled:l,...c}=e,m=(0,i.$)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500 shadow-sm hover:shadow-md",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm hover:shadow-md",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-orange-500 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n],a),u=(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",suppressHydrationWarning:!0,children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",suppressHydrationWarning:!0}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",suppressHydrationWarning:!0})]}),d]});return(0,s.jsx)("button",{className:m,ref:r,disabled:l||o,...c,suppressHydrationWarning:!0,children:u})});n.displayName="Button";let o=n},44534:(e,r,a)=>{Promise.resolve().then(a.bind(a,96343))},46944:(e,r,a)=>{"use strict";var s=a(53936);a.o(s,"useParams")&&a.d(r,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(r,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})},86948:(e,r,a)=>{"use strict";a.d(r,{Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>o});var s=a(49095),t=a(28175),i=a(2821);let n=(0,t.forwardRef)((e,r)=>{let{className:a,variant:t="default",...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.$)("rounded-lg",{default:"bg-white border border-gray-200",outlined:"bg-white border-2 border-gray-300",elevated:"bg-white shadow-lg border border-gray-100"}[t],a),...n,suppressHydrationWarning:!0})});n.displayName="Card";let o=(0,t.forwardRef)((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.$)("px-4 py-3 sm:px-6 sm:py-4 border-b border-gray-200",a),...t,suppressHydrationWarning:!0})});o.displayName="CardHeader";let d=(0,t.forwardRef)((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.$)("px-4 py-3 sm:px-6 sm:py-4",a),...t,suppressHydrationWarning:!0})});d.displayName="CardContent";let l=(0,t.forwardRef)((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("h3",{ref:r,className:(0,i.$)("text-lg font-semibold leading-6 text-gray-900",a),...t,suppressHydrationWarning:!0})});l.displayName="CardTitle",(0,t.forwardRef)((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("p",{ref:r,className:(0,i.$)("text-sm text-gray-600 mt-1",a),...t,suppressHydrationWarning:!0})}).displayName="CardDescription",(0,t.forwardRef)((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.$)("px-4 py-3 sm:px-6 sm:py-4 border-t border-gray-200",a),...t,suppressHydrationWarning:!0})}).displayName="CardFooter"},96343:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var s=a(49095),t=a(28175),i=a(46944),n=a(86948),o=a(3998);function d(){var e,r;let a=(0,i.useRouter)(),d=(0,i.useParams)().id,[l,c]=(0,t.useState)(null),[m,u]=(0,t.useState)(!0),[g,p]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),[y,f]=(0,t.useState)({name:"",slug:"",description:"",parent_id:"",is_active:!0,sort_order:0}),[b,j]=(0,t.useState)([]);(0,t.useEffect)(()=>{d&&(v(),N())},[d]);let v=async()=>{u(!0),h(null);try{let r=await fetch("/api/categories/".concat(d));if(r.ok){var e;let a=await r.json();c(a),f({name:a.name||"",slug:a.slug||"",description:a.description||"",parent_id:a.parent_id||"",is_active:null==(e=a.is_active)||e,sort_order:a.sort_order||0})}else{let e=await r.json();h(e.error||"Failed to load category")}}catch(e){h("Failed to load category")}finally{u(!1)}},N=async()=>{try{let e=await fetch("/api/categories?includeInactive=false");if(e.ok){let r=await e.json(),a=[];Array.isArray(r)?a=r:r.data&&r.data.categories?a=r.data.categories:r.categories&&(a=r.categories);let s=a.filter(e=>e.id!==d&&e.parent_id!==d);j(s)}}catch(e){console.error("Failed to fetch parent categories:",e)}},w=e=>{let{name:r,value:a,type:s}=e.target;f(t=>({...t,[r]:"checkbox"===s?e.target.checked:a}))},C=async e=>{e.preventDefault(),p(!0),h(null);try{let e=await fetch("/api/categories/".concat(d),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(e.ok)a.push("/admin?tab=categories");else{let r=await e.json();h(r.error||"Failed to update category")}}catch(e){h("Failed to update category")}finally{p(!1)}};return m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):x&&!l?(0,s.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-600 mb-4",children:x}),(0,s.jsx)(o.A,{onClick:()=>a.push("/admin?tab=categories"),variant:"outline",children:"Back to Categories"})]})})})}):(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Category"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Update category information"})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)("h2",{className:"text-lg font-medium",children:"Category Details"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[x&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:y.name,onChange:e=>{let r=e.target.value;f(e=>({...e,name:r,slug:r.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}))},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter category name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug *"}),(0,s.jsx)("input",{type:"text",id:"slug",name:"slug",value:y.slug,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"category-url-slug"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"This will be used in the URL. Only lowercase letters, numbers, and hyphens allowed."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:y.description,onChange:w,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter category description"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"parent_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Category"}),(0,s.jsxs)("select",{id:"parent_id",name:"parent_id",value:y.parent_id,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"",children:"No Parent (Root Category)"}),b.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),(0,s.jsx)("input",{type:"number",id:"sort_order",name:"sort_order",value:y.sort_order,onChange:w,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first in listings."})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:y.is_active,onChange:w,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Active (visible to customers)"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t",children:[(0,s.jsx)(o.A,{type:"button",variant:"outline",onClick:()=>a.push("/admin?tab=categories"),children:"Cancel"}),(0,s.jsx)(o.A,{type:"submit",disabled:g,children:g?"Updating...":"Update Category"})]})]})})]}),l&&(0,s.jsxs)(n.Zp,{className:"mt-6",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Category Statistics"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Products:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:(null==(e=l._count)?void 0:e.products)||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Subcategories:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:(null==(r=l._count)?void 0:r.children)||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Created:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:new Date(l.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Updated:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:new Date(l.updated_at).toLocaleDateString()})]})]})})]})]})}}},e=>{e.O(0,[3575,7358],()=>e(e.s=44534)),_N_E=e.O()}]);