(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2221],{777:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(41981)},6725:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,76447,23)),Promise.resolve().then(s.t.bind(s,54968,23)),Promise.resolve().then(s.bind(s,777)),Promise.resolve().then(s.bind(s,69044)),Promise.resolve().then(s.bind(s,36475)),Promise.resolve().then(s.bind(s,98081)),Promise.resolve().then(s.bind(s,38292)),Promise.resolve().then(s.bind(s,16430)),Promise.resolve().then(s.bind(s,19567)),Promise.resolve().then(s.bind(s,84330)),Promise.resolve().then(s.bind(s,61620)),Promise.resolve().then(s.bind(s,98290)),Promise.resolve().then(s.bind(s,38713)),Promise.resolve().then(s.bind(s,94361))},16430:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(49095),r=s(28175),l=s(46944),i=s(97524),n=s(71594),o=s(28300),c=s(3998),d=s(94361),u=s(57649),m=s(34051);function x(e){let{product:t}=e,[s,x]=(0,r.useState)(1),[h,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),{addToCart:b,isLoading:v}=(0,d._)(),{openCart:y}=(0,u.x)(),j=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=()=>{g(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,r.useEffect)(()=>{h&&f(!0)},[h]);let w=e=>{e>=1&&x(e)},N=async()=>{let e=JSON.parse(JSON.stringify(t));await b(e,s)&&(y(),x(1))},S=async()=>{let e=JSON.parse(JSON.stringify(t));await b(e,s)&&j.push("/checkout")},k=s<=1;return h?(0,a.jsxs)("div",{className:"fixed bottom-[64px] left-0 right-0 bg-white border-t border-gray-200 shadow-2xl z-30 px-3 py-2 ".concat(p?"block":"hidden"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden",children:(0,a.jsx)("img",{src:t.thumbnailUrl||"/placeholder-product.svg",alt:t.name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsx)("span",{className:"text-base font-bold text-gray-900",children:(0,m.vv)(Number(t.basePrice),t.currency||m.OS)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg ml-2",children:[(0,a.jsx)("button",{onClick:()=>w(s-1),disabled:k||v,className:"flex items-center justify-center w-8 h-8 text-gray-600 hover:text-gray-800 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 text-sm font-bold text-gray-900 bg-gray-50 border-x border-gray-300",children:s}),(0,a.jsx)("button",{onClick:()=>w(s+1),disabled:v,className:"flex items-center justify-center w-8 h-8 text-gray-600 hover:text-gray-800 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(c.A,{size:"sm",disabled:v,onClick:N,className:"flex-1 h-11 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold text-sm rounded-lg shadow-md",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1"}),v?"Adding...":"Add to Cart"]}),(0,a.jsx)(c.A,{size:"sm",disabled:v,onClick:S,className:"flex-1 h-11 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold text-sm rounded-lg shadow-md",children:"Buy Now"})]})]}):null}},19567:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(49095),r=s(28175),l=s(59851);let i=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"}))}),n=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))});var o=s(5833),c=s(61449);let d=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6"}))});function u(e){let{images:t,productName:s,className:u=""}=e,[m,x]=(0,r.useState)(0),[h,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(1),[b,v]=(0,r.useState)({x:50,y:50}),[y,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)({x:0,y:0}),S=(0,r.useRef)(null),k=(0,r.useRef)(null),C=t.length>0?t:["/placeholder-product.jpg"],A=()=>{x(e=>(e+1)%C.length),f(1),v({x:50,y:50})},E=()=>{x(e=>(e-1+C.length)%C.length),f(1),v({x:50,y:50})},P=()=>{g(!0),document.body.style.overflow="hidden"},L=()=>{g(!1),f(1),v({x:50,y:50}),document.body.style.overflow="unset"},O=()=>{f(e=>Math.min(e+.5,3))},T=()=>{f(e=>Math.max(e-.5,1))},M=e=>{if(p>1){let t=e.currentTarget.getBoundingClientRect();v({x:(e.clientX-t.left)/t.width*100,y:(e.clientY-t.top)/t.height*100})}},R=(0,r.useRef)({x:0,y:0}),z=e=>{R.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},_=e=>{if(!R.current.x||!R.current.y)return;let t=R.current.x-e.changedTouches[0].clientX;Math.abs(t)>Math.abs(R.current.y-e.changedTouches[0].clientY)&&(t>50?A():t<-50&&E())};return(0,r.useEffect)(()=>{let e=e=>{if(h)switch(e.key){case"ArrowLeft":E();break;case"ArrowRight":A();break;case"Escape":L();break;case"+":case"=":O();break;case"-":T()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[h]),(0,a.jsxs)("div",{className:"space-y-4 ".concat(u),children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("div",{ref:S,className:"aspect-square w-full overflow-hidden rounded-lg bg-gray-100 cursor-zoom-in",onClick:P,onMouseMove:M,onTouchStart:z,onTouchEnd:_,children:[(0,a.jsx)(l.default,{src:C[m],alt:"".concat(s," - Image ").concat(m+1),fill:!0,className:"object-cover transition-transform duration-300 hover:scale-105",priority:0===m,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200",children:(0,a.jsx)("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),P()},className:"p-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full shadow-lg transition-all duration-200","aria-label":"View fullscreen",children:(0,a.jsx)(i,{className:"w-5 h-5 text-gray-700"})})})})]}),C.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:E,className:"absolute left-2 top-1/2 transform -translate-y-1/2 p-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200","aria-label":"Previous image",children:(0,a.jsx)(n,{className:"w-5 h-5 text-gray-700"})}),(0,a.jsx)("button",{onClick:A,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200","aria-label":"Next image",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-gray-700"})})]}),C.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 px-3 py-1 bg-black bg-opacity-60 text-white text-sm rounded-full",children:[m+1," / ",C.length]})]}),C.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:C.slice(0,8).map((e,t)=>(0,a.jsx)("button",{onClick:()=>{x(t),f(1),v({x:50,y:50})},className:"aspect-square overflow-hidden rounded-md transition-all duration-200 ".concat(m===t?"ring-2 ring-indigo-500 ring-offset-2":"hover:opacity-75"),children:(0,a.jsx)(l.default,{src:e,alt:"".concat(s," thumbnail ").concat(t+1),width:150,height:150,className:"w-full h-full object-cover",sizes:"(max-width: 768px) 25vw, 150px"})},t))}),h&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative w-full h-full max-w-6xl max-h-full flex items-center justify-center",children:[(0,a.jsx)("button",{onClick:L,className:"absolute top-4 right-4 z-10 p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full text-white transition-all duration-200","aria-label":"Close modal",children:(0,a.jsx)(c.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 z-10 flex space-x-2",children:[(0,a.jsx)("button",{onClick:T,disabled:p<=1,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full text-white transition-all duration-200","aria-label":"Zoom out",children:(0,a.jsx)(d,{className:"w-6 h-6"})}),(0,a.jsx)("button",{onClick:O,disabled:p>=3,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full text-white transition-all duration-200","aria-label":"Zoom in",children:(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"px-3 py-2 bg-white bg-opacity-20 rounded-full text-white text-sm",children:[Math.round(100*p),"%"]})]}),C.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:E,className:"absolute left-4 top-1/2 transform -translate-y-1/2 p-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full text-white transition-all duration-200","aria-label":"Previous image",children:(0,a.jsx)(n,{className:"w-8 h-8"})}),(0,a.jsx)("button",{onClick:A,className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full text-white transition-all duration-200","aria-label":"Next image",children:(0,a.jsx)(o.A,{className:"w-8 h-8"})})]}),C.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-white bg-opacity-20 text-white rounded-full",children:[m+1," / ",C.length]}),(0,a.jsx)("div",{ref:k,className:"relative w-full h-full flex items-center justify-center overflow-hidden cursor-move",onMouseMove:M,onTouchStart:e=>{if(p>1){j(!0);let t=e.touches[0];N({x:t.clientX,y:t.clientY})}z(e)},onTouchMove:e=>{if(y&&p>1){e.preventDefault();let t=e.touches[0],s=t.clientX-w.x,a=t.clientY-w.y;v(e=>({x:Math.max(0,Math.min(100,e.x-s/5)),y:Math.max(0,Math.min(100,e.y-a/5))})),N({x:t.clientX,y:t.clientY})}},onTouchEnd:e=>{j(!1),_(e)},children:(0,a.jsx)(l.default,{src:C[m],alt:"".concat(s," - Image ").concat(m+1),width:1200,height:1200,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:"scale(".concat(p,")"),transformOrigin:"".concat(b.x,"% ").concat(b.y,"%")},sizes:"100vw"})})]})})]})}},38713:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(49095),r=s(28175),l=s(46944),i=s(93762);function n(){let{isVisible:e,scrollToTop:t}=function(){let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),{isVisible:e,scrollToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}}(),s=(0,l.usePathname)(),n=s.startsWith("/products/")&&"/products"!==s;return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)("button",{onClick:t,className:"fixed z-40 p-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-fade-in ".concat(n?"bottom-48 right-4 md:bottom-8 md:right-8":"bottom-8 right-8"),"aria-label":"Scroll to top",children:(0,a.jsx)(i.A,{className:"w-6 h-6"})})})}},61620:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(49095),r=s(28175),l=s(68387);function i(e){var t,s;let{product:r,className:i=""}=e,n=r.attributes||[],o=[{label:"SKU",value:r.id},{label:"Category",value:"object"==typeof r.category?null==(t=r.category)?void 0:t.name:"Uncategorized"},{label:"Brand",value:"object"==typeof r.brand?null==(s=r.brand)?void 0:s.name:"Not specified"},{label:"Weight",value:r.weight?"".concat(r.weight," kg"):"Not specified"},{label:"Dimensions",value:r.dimensions?"".concat(r.dimensions.length||"N/A"," \xd7 ").concat(r.dimensions.width||"N/A"," \xd7 ").concat(r.dimensions.height||"N/A"," cm"):"Not specified"},{label:"Material",value:(0,l.ul)(r.attributes,"material")},{label:"Color",value:(0,l.ul)(r.attributes,"color")}],c=n.map(e=>({label:String(e.name),value:e.value})),d=[{label:"In Stock",value:r.inventory>0?"Yes":"No"},{label:"Stock Quantity",value:r.inventory.toString()},{label:"Low Stock Threshold",value:"".concat(r.lowStockThreshold||5," units")}];return(0,a.jsxs)("div",{className:"".concat(i),children:[(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Product Specifications"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Detailed information about this product"})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[o.concat(d).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:e.label}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:e.value})]},t)),c.filter(e=>!o.some(t=>t.label.toLowerCase()===e.label.toLowerCase())&&!d.some(t=>t.label.toLowerCase()===e.label.toLowerCase())).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 capitalize",children:e.label}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:e.value})]},"additional-".concat(t)))]})})]}),r.tags&&r.tags.length>0&&(0,a.jsxs)("div",{className:"mt-6 bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tags"})}),(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.tags.map((e,t)=>(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:e},t))})})]})]})}var n=s(89885),o=s(68466),c=s(3998),d=s(86948);function u(e){let{productId:t,onReviewSubmit:s,onCancel:l,className:i=""}=e,{data:u}=(0,n.useSession)(),[m,x]=(0,r.useState)(0),[h,g]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null),C=async e=>{if(e.preventDefault(),0===m)return void k("Please select a rating");if(!p.trim())return void k("Please write a review");if(!u&&(!b.trim()||!y.trim()))return void k("Please provide your name and email");N(!0),k(null);try{let e=await fetch("/api/products/".concat(t,"/reviews"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:m,title:h.trim()||void 0,content:p.trim(),...u?{}:{guestName:b.trim(),guestEmail:y.trim()}})}),a=await e.json();if(a.success){let e={id:a.data.id,rating:a.data.rating,title:a.data.title,content:a.data.content,createdAt:a.data.createdAt,helpfulVotes:a.data.helpfulVotes,user:a.data.user,guestName:a.data.guestName,isVerified:a.data.isVerified};s(e),x(0),g(""),f(""),v(""),j("")}else k(a.error||"Failed to submit review")}catch(e){k("Failed to submit review. Please try again.")}finally{N(!1)}};return(0,a.jsx)(d.Zp,{className:"".concat(i),children:(0,a.jsxs)(d.Wu,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Write a Review"}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[S&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:S})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),(0,a.jsx)(o.A,{rating:m,interactive:!0,onRatingChange:x,size:"lg"})]}),!u&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"guestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name *"}),(0,a.jsx)("input",{type:"text",id:"guestName",value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"guestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Email *"}),(0,a.jsx)("input",{type:"email",id:"guestEmail",value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Review Title (Optional)"}),(0,a.jsx)("input",{type:"text",id:"title",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Summarize your review",maxLength:255})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Review *"}),(0,a.jsx)("textarea",{id:"content",value:p,onChange:e=>f(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Tell us about your experience with this product...",maxLength:2e3,required:!0}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[p.length,"/2000 characters"]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(c.A,{type:"button",onClick:l,className:"bg-gray-300 hover:bg-gray-400 text-gray-700",children:"Cancel"}),(0,a.jsx)(c.A,{type:"submit",disabled:w||0===m||!p.trim(),className:"bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Submitting...":"Submit Review"})]})]})]})})}function m(e){let{product:t,className:s=""}=e,{data:l}=(0,n.useSession)(),[i,m]=(0,r.useState)([]),[x,h]=(0,r.useState)({average:0,count:0}),[g,p]=(0,r.useState)(!0),[f,b]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{p(!0),b(null);let e=await fetch("/api/products/".concat(t.id,"/reviews"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();if(s.success&&s.data)m(s.data.reviews),h(s.data.ratingStats);else if(s.reviews&&s.ratingStats)m(s.reviews),h(s.ratingStats);else throw Error("Unexpected response format")}catch(e){console.error("Error fetching reviews:",e),b(e instanceof Error?e.message:"Failed to load reviews")}finally{p(!1)}})()},[t.id]);let j=async e=>{try{(await fetch("/api/products/".concat(t.id,"/reviews/").concat(e,"/helpful"),{method:"POST"})).ok&&m(t=>t.map(t=>t.id===e?{...t,helpfulVotes:t.helpfulVotes+1}:t))}catch(e){console.error("Error voting helpful:",e)}};return g?(0,a.jsx)("div",{className:"".concat(s),children:(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 h-32 rounded-lg"})},t))})}):f?(0,a.jsx)("div",{className:"".concat(s),children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsxs)("p",{className:"text-red-600",children:["Error: ",f]})})}):(0,a.jsxs)("div",{className:"".concat(s),children:[(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{rating:x.average,size:"lg"}),(0,a.jsx)("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:x.average.toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:x.count})," reviews"]})]}),l?(0,a.jsx)(c.A,{onClick:()=>y(!v),className:"bg-indigo-600 hover:bg-indigo-700",children:v?"Cancel":"Write a Review"}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Please log in to write a review"})]}),x.count>0&&(0,a.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>{let t=i.filter(t=>t.rating===e).length,s=x.count>0?t/x.count*100:0;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 w-8",children:e}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:"".concat(s,"%")}})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 w-8",children:t})]},e)})})]}),v&&l&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(u,{productId:t.id,onReviewSubmit:e=>{m(t=>[e,...t]),h(e=>({...e,count:e.count+1})),y(!1)},onCancel:()=>y(!1)})}),(0,a.jsx)("div",{className:"space-y-6",children:0===i.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review this product!"})}):i.map(e=>{var t,s,r,l,i;return(0,a.jsx)(d.Zp,{children:(0,a.jsxs)(d.Wu,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(null==(t=e.user)?void 0:t.image)?(0,a.jsx)("img",{src:e.user.image,alt:e.user.name,className:"w-10 h-10 rounded-full"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:(null==(r=e.user)||null==(s=r.name)?void 0:s[0])||(null==(l=e.guestName)?void 0:l[0])||"?"})})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:(null==(i=e.user)?void 0:i.name)||e.guestName||"Anonymous"}),e.isVerified&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Verified Purchase"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(o.A,{rating:e.rating,size:"sm"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]})]}),e.title&&(0,a.jsx)("h5",{className:"text-lg font-medium text-gray-900 mt-3 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.content})]})}),(0,a.jsx)("div",{className:"mt-4 flex items-center justify-between",children:(0,a.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-indigo-600 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),(0,a.jsxs)("span",{children:["Helpful (",e.helpfulVotes,")"]})]})})]})},e.id)})})]})}function x(e){let{product:t,className:s=""}=e,[l,n]=(0,r.useState)("specifications"),o=[{id:"specifications",name:"Specifications",count:null},{id:"reviews",name:"Reviews & Comments",count:t.ratingCount||0}];return(0,a.jsxs)("div",{className:"".concat(s),children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:o.map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(l===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.name,null!==e.count&&(0,a.jsx)("span",{className:"ml-2 py-0.5 px-2 rounded-full text-xs ".concat(l===e.id?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"),children:e.count})]},e.id))})}),(0,a.jsxs)("div",{className:"mt-6",children:["specifications"===l&&(0,a.jsx)(i,{product:t}),"reviews"===l&&(0,a.jsx)(m,{product:t})]})]})}},68387:(e,t,s)=>{"use strict";function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Not specified";if(!e||!Array.isArray(e))return s;let a=e.find(e=>{var s;return(null==(s=e.name)?void 0:s.toLowerCase())===t.toLowerCase()});return(null==a?void 0:a.value)||s}s.d(t,{ul:()=>a})},68466:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(49095),r=s(28175);function l(e){let{rating:t,interactive:s=!1,onRatingChange:l,size:i="md",className:n=""}=e,[o,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(!1),m={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},x=()=>{s&&(c(0),u(!1))},h=d?o:t;return(0,a.jsx)("div",{className:"flex items-center ".concat(n),children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>{let r=t+1,n=r<=h,o=r===Math.ceil(h)&&h%1!=0;return(0,a.jsx)("button",{type:s?"button":void 0,className:"".concat(m[i]," ").concat(s?"cursor-pointer hover:scale-110 transition-transform duration-150":"cursor-default"),onClick:()=>{s&&l&&l(r)},onMouseEnter:()=>{s&&(c(r),u(!0))},onMouseLeave:x,disabled:!s,children:(0,a.jsxs)("svg",{className:"w-full h-full ".concat(n||o?"text-yellow-400":"text-gray-300"),fill:n?"currentColor":"none",viewBox:"0 0 20 20",children:[o?(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"half-".concat(t),children:[(0,a.jsx)("stop",{offset:"50%",stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"50%",stopColor:"transparent"})]})}):null,(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",fill:o?"url(#half-".concat(t,")"):"currentColor"})]})},t)})})}},69044:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(49095),s(21502),s(91683),s(12714)},70666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return n}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return r?new r:new a}function i(e){return r?r.bind(e):a.bind(e)}function n(){return r?r.snapshot():function(e,...t){return e(...t)}}},82231:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(28175);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))})},84330:(e,t,s)=>{"use strict";s.d(t,{default:()=>S});var a=s(49095),r=s(28175),l=s(76447),i=s.n(l),n=s(83599),o=s(86948),c=s(46944),d=s(97524),u=s(71594),m=s(3998),x=s(94361),h=s(57649);function g(e){let{product:t}=e,[s,l]=(0,r.useState)(1),[i,n]=(0,r.useState)(!1),{addToCart:o,isLoading:g}=(0,x._)(),{openCart:p}=(0,h.x)(),f=(0,c.useRouter)();(0,r.useEffect)(()=>{let e=()=>{n(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let b=e=>{e>=1&&l(e)},v=async()=>{let e=JSON.parse(JSON.stringify(t));await o(e,s)&&(p(),l(1))},y=async()=>{let e=JSON.parse(JSON.stringify(t));await o(e,1)&&f.push("/checkout")},j=s<=1;return i?null:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,a.jsx)("button",{onClick:()=>b(s-1),disabled:j||g,className:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}),(0,a.jsx)("input",{type:"number",min:"1",value:s,onChange:e=>b(parseInt(e.target.value)||1),disabled:g,className:"w-16 px-2 py-2 text-center border-0 focus:ring-0 disabled:opacity-50"}),(0,a.jsx)("button",{onClick:()=>b(s+1),disabled:g,className:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(m.A,{size:"lg",disabled:g,onClick:v,className:"flex-1",children:g?"Adding...":"Add to Cart"}),(0,a.jsx)(m.A,{size:"lg",disabled:g,onClick:y,className:"flex-1 bg-amber-600 hover:bg-amber-700 text-white",children:"Buy Now"})]}),!1]})}var p=s(68466);function f(e){let{productId:t,className:s=""}=e,[l,i]=(0,r.useState)({average:0,count:0}),[n,o]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/products/".concat(t,"/reviews")),s=await e.json();s.success&&i(s.data.ratingStats)}catch(e){}finally{o(!1)}})()},[t]),n)?(0,a.jsx)("div",{className:"".concat(s," animate-pulse"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex space-x-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded"},t))}),(0,a.jsx)("div",{className:"h-4 w-16 bg-gray-200 rounded"})]})}):0===l.count?null:(0,a.jsx)("div",{className:"".concat(s),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{rating:l.average,size:"sm"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:l.average.toFixed(1)}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",l.count," ",1===l.count?"Review":"Reviews",")"]})]})})}var b=s(8327),v=s(82231),y=s(63106),j=s(34051);function w(e){let{className:t=""}=e,[s,l]=(0,r.useState)(null),[i,n]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/settings"),t=await e.json();t.success&&l(t.data)}catch(e){console.error("Error fetching settings:",e),l({shipping:{freeShippingThreshold:50,currency:"USD",shippingCost:5.99},tax:{rate:.1,included:!1},currency:{default:"USD",symbol:"$",position:"before"},policies:{returnDays:30,warrantyDays:365}})}finally{n(!1)}})()},[]),i)return(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 ".concat(t),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-4 w-20 bg-gray-200 rounded mb-1"}),(0,a.jsx)("div",{className:"h-3 w-24 bg-gray-200 rounded"})]})]},t))})]})});if(!s)return null;let{shipping:o,policies:c}=s,d=[{icon:b.A,title:"Free Shipping",description:"On orders over ".concat((0,j.vv)(o.freeShippingThreshold,o.currency)),bgColor:"bg-green-100",iconColor:"text-green-600"},{icon:v.A,title:"Secure Payment",description:"SSL encrypted",bgColor:"bg-blue-100",iconColor:"text-blue-600"},{icon:y.A,title:"".concat(c.returnDays,"-Day Returns"),description:"Hassle-free returns",bgColor:"bg-purple-100",iconColor:"text-purple-600"}];return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 ".concat(t),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Why Buy From Us?"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:d.map((e,t)=>{let s=e.icon;return(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 ".concat(e.bgColor," rounded-full"),children:(0,a.jsx)(s,{className:"w-6 h-6 ".concat(e.iconColor)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},t)})})]})}var N=s(68387);function S(e){var t,s,l;let{product:c}=e,[d,u]=(0,r.useState)(!1);console.log("Product attributes debug:",{productName:c.name,productSlug:c.slug,attributesCount:(null==(t=c.attributes)?void 0:t.length)||0,attributes:c.attributes||[],hasAttributes:!!c.attributes});let m="object"==typeof c.category?null==(s=c.category)?void 0:s.name:c.category||"Uncategorized",x=async()=>{if(navigator.share)try{await navigator.share({title:c.name,text:c.description,url:window.location.href})}catch(e){}else u(!d)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("nav",{className:"text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i(),{href:"/products",className:"hover:text-indigo-600 transition-colors",children:"Products"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(i(),{href:"/products?category=".concat(m),className:"hover:text-indigo-600 transition-colors",children:m}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:c.name})]})}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2 leading-tight",children:c.name}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(f,{productId:c.id})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:x,className:"p-2 rounded-full border border-gray-300 hover:border-indigo-500 hover:bg-indigo-50 transition-all duration-200","aria-label":"Share product",children:(0,a.jsx)(n.A,{className:"w-6 h-6 text-gray-600"})}),d&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Copy link"}),(0,a.jsx)("a",{href:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(window.location.href),"&text=").concat(encodeURIComponent(c.name)),target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Share on Twitter"}),(0,a.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(window.location.href)),target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Share on Facebook"})]})]})})]}),(0,a.jsx)("div",{className:"max-w-xl rounded-2xl border border-indigo-100 bg-gradient-to-r from-indigo-50 via-purple-50 to-white p-4 sm:p-5 shadow-sm",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)("div",{className:"flex flex-wrap items-end gap-3",children:(0,a.jsx)("span",{className:"text-2xl font-bold leading-none text-indigo-700 sm:text-3xl lg:text-4xl",children:(0,j.vv)(Number(c.basePrice),c.currency||j.OS)})}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2 text-xs text-gray-500 sm:items-end sm:text-sm",children:[(0,a.jsx)("span",{className:"w-full rounded-full border border-white/60 bg-white/80 px-3 py-1 text-center font-medium text-gray-700 shadow-sm sm:w-auto",children:m}),(0,a.jsx)("span",{className:"text-[11px] uppercase tracking-wide",children:"Prices inclusive of taxes"})]})]})}),(0,a.jsxs)("div",{className:"prose prose-gray max-w-none",children:[!!c.shortDescription&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Overview"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:c.shortDescription})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:c.description})]})]}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Availability:"}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"In Stock"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"SKU:"}),(0,a.jsx)("span",{className:"text-gray-600 font-mono",children:c.sku||c.id})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Brand:"}),(0,a.jsx)("span",{className:"text-gray-600",children:"object"==typeof c.brand?(null==(l=c.brand)?void 0:l.name)||"—":c.brand||"—"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Weight:"}),(0,a.jsx)("span",{className:"text-gray-600",children:c.weight?"".concat(c.weight," kg"):"—"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Material:"}),(0,a.jsx)("span",{className:"text-gray-600",children:(0,N.ul)(c.attributes,"material")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Color:"}),(0,a.jsx)("span",{className:"text-gray-600",children:(0,N.ul)(c.attributes,"color")})]})]})]})})}),(0,a.jsx)(g,{product:c}),(0,a.jsx)(w,{})]})}},91683:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(91816)},91816:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(70666).createAsyncLocalStorage)()},98290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(49095),r=s(28175),l=s(89885),i=s(53796),n=s(20243),o=s(22142),c=s(3998),d=s(2581),u=s(63106);function m(e){var t;let{productId:s,className:m=""}=e,{data:x}=(0,l.useSession)(),[h,g]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[b,v]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[w]=(0,r.useState)(4),[N,S]=(0,r.useState)(0),[k,C]=(0,r.useState)(!0),A=(null==x||null==(t=x.user)?void 0:t.id)||"guest",E=(0,r.useRef)(!1),P=(0,r.useRef)(new Set),L=(0,r.useRef)(null),O=(0,r.useRef)(0),T=(0,r.useCallback)(async(e,t)=>{if(E.current)return;E.current=!0,t?v(!0):f(!0),j(null),L.current&&L.current.abort();let a=new AbortController;L.current=a;let r=setTimeout(()=>{a.abort()},2e4);try{let l=new URLSearchParams({userId:A,limit:String(w),offset:String(e)}),i=await fetch("/api/products/".concat(s,"/mixed-recommendations?").concat(l.toString()),{signal:a.signal,cache:"force-cache",priority:"low"});if(clearTimeout(r),!i.ok)throw Error("Failed to load recommendations: ".concat(i.status," ").concat(i.statusText));let n=await i.json();if(n.success){let s=n.data.filter(e=>!P.current.has(e.productId));if(s.forEach(e=>P.current.add(e.productId)),0===s.length&&0===e)try{let e=await fetch("/api/recommendations/guest/popular?page=1&limit=".concat(w),{cache:"force-cache",priority:"low"});if(e.ok){let t=await e.json();if(Array.isArray(t.products)){let e=t.products.map(e=>({productId:e.product.id,score:e.score||0,reason:"popular",product:e.product}));g(e),C(!1),S(0),O.current=0;return}}}catch(e){}g(e=>t?[...e,...s]:s),C(s.length>=w),S(e),O.current=0}else throw Error("Invalid response format")}catch(e){if(clearTimeout(r),"AbortError"===e.name){try{let e=await fetch("/api/recommendations/guest/popular?page=1&limit=".concat(w),{cache:"force-cache",priority:"low"});if(e.ok){let t=await e.json();if(Array.isArray(t.products)){let e=t.products.map(e=>({productId:e.product.id,score:e.score||0,reason:"popular",product:e.product}));g(e),C(!1),S(0),O.current=0;return}}}catch(e){}C(!1);return}try{let e=await fetch("/api/recommendations/guest/popular?page=1&limit=".concat(w),{cache:"force-cache",priority:"low"});if(e.ok){let t=await e.json();if(Array.isArray(t.products)){let e=t.products.map(e=>({productId:e.product.id,score:e.score||0,reason:"popular",product:e.product}));g(e),C(!1),S(0),O.current=0;return}}}catch(e){}j(e instanceof Error?e.message:"Failed to load recommendations"),console.error("Error fetching recommendations:",e)}finally{f(!1),v(!1),E.current=!1}},[s,A,w]);(0,r.useEffect)(()=>{g([]),S(0),C(!0),j(null),P.current=new Set,T(0,!1)},[s,A,T]);let M=(0,r.useCallback)(()=>{b||!k||y||E.current||T(N+w,!0)},[N,w,k,b,y,T]),R=(0,r.useCallback)(async()=>{if(O.current>=3)return void j("Maximum retry attempts reached. Please refresh the page.");O.current+=1,0===h.length?(g([]),S(0),C(!0),P.current=new Set,await T(0,!1)):await T(N+w,!0)},[h.length,N,w,T]);return((0,r.useEffect)(()=>()=>{L.current&&L.current.abort()},[]),p&&0===h.length)?(0,a.jsxs)("div",{className:"".concat(m),children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"You May Also Like"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 sm:gap-6",children:Array.from({length:8}).map((e,t)=>(0,a.jsx)(n.Dj,{},t))})]}):y&&0===h.length||0===h.length?null:(0,a.jsxs)("div",{className:"".concat(m),children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"You May Also Like"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-full border",children:["Mixed: Similar • Trending • Popular",(null==x?void 0:x.user)?" • Personalized":""]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 sm:gap-6",children:h.map(e=>{let{product:t,reason:s}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.A,{product:t,compact:!0,priority:!1}),(0,a.jsx)("div",{className:"absolute top-3 left-3 z-20",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold shadow-lg backdrop-blur-sm border border-white/20 ".concat("similar"===s?"bg-blue-500/90 text-white":"trending"===s?"bg-orange-500/90 text-white":"popular"===s?"bg-green-500/90 text-white":"bg-purple-500/90 text-white"),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"similar"===s?"\uD83D\uDD17 Similar":"trending"===s?"\uD83D\uDCC8 Trending":"popular"===s?"\uD83D\uDD25 Popular":"✨ For You"}),(0,a.jsx)("span",{className:"sm:hidden",children:"similar"===s?"\uD83D\uDD17":"trending"===s?"\uD83D\uDCC8":"popular"===s?"\uD83D\uDD25":"✨"})]})})]},t.id)})}),b&&(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 bg-gray-50 px-6 py-3 rounded-full border",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Loading more recommendations..."})]})}),y&&h.length>0&&(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md text-center",children:[(0,a.jsx)(d.A,{className:"h-8 w-8 text-red-500 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-red-600 mb-4 text-sm",children:y}),(0,a.jsxs)(c.$,{onClick:R,size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}),!k&&h.length>0&&!b&&(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"✨"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"That's all the recommendations we have for you!"})]})}),(0,a.jsx)(o.A,{onIntersect:M,loading:b,hasMore:k,threshold:"200px",disabled:!!y})]})}}},e=>{e.O(0,[6447,9885,7640,9851,378,2313,1852,8616,3575,7358],()=>e(e.s=6725)),_N_E=e.O()}]);