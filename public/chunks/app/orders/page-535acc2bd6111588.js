(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1778],{5833:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(28175);let l=a.forwardRef(function(e,s){let{title:t,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))})},59353:(e,s,t)=>{Promise.resolve().then(t.bind(t,69923))},63106:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(28175);let l=a.forwardRef(function(e,s){let{title:t,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},69923:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(49095),l=t(28175),r=t(76447),i=t.n(r),n=t(63106),d=t(33690),c=t(8327),o=t(60596),x=t(38092),m=t(5833),h=t(54603);let u=l.forwardRef(function(e,s){let{title:t,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),t?l.createElement("title",{id:a},t):null,l.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))});var p=t(43877),g=t(36364),b=t(86948),j=t(3998),v=t(78334),f=t(87110),N=t(95244);let w={ALL:{label:"All Orders",badge:"bg-gray-100 text-gray-700 border border-gray-200",icon:(0,a.jsx)(n.A,{className:"h-4 w-4"})},PENDING:{label:"Pending",badge:"bg-[#FFF3E0] text-[#E65100]",icon:(0,a.jsx)(d.A,{className:"h-4 w-4 text-[#E65100]"})},PROCESSING:{label:"Processing",badge:"bg-[#E3F2FD] text-[#1565C0]",icon:(0,a.jsx)(n.A,{className:"h-4 w-4 text-[#1565C0]"})},SHIPPED:{label:"Shipped",badge:"bg-[#F3E5F5] text-[#7B1FA2]",icon:(0,a.jsx)(c.A,{className:"h-4 w-4 text-[#7B1FA2]"})},DELIVERED:{label:"Delivered",badge:"bg-[#E8F5E9] text-[#2E7D32]",icon:(0,a.jsx)(o.A,{className:"h-4 w-4 text-[#2E7D32]"})},CANCELLED:{label:"Cancelled",badge:"bg-[#FFEBEE] text-[#C62828]",icon:(0,a.jsx)(x.A,{className:"h-4 w-4 text-[#C62828]"})},REFUNDED:{label:"Refunded",badge:"bg-[#F5F5F5] text-[#616161]",icon:(0,a.jsx)(n.A,{className:"h-4 w-4 text-[#616161]"})}},y=[{label:"Last 7 days",value:7},{label:"Last 30 days",value:30},{label:"Last 3 months",value:90},{label:"Last 6 months",value:180},{label:"All time",value:0}],E=["PENDING","PROCESSING","SHIPPED","DELIVERED"];function A(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(!0),[n,d]=(0,l.useState)(""),[c,o]=(0,l.useState)(1),[x,A]=(0,l.useState)("ALL"),[F,D]=(0,l.useState)(""),[C,L]=(0,l.useState)(y[1]);(0,l.useEffect)(()=>{S()},[c]);let S=async()=>{r(!0),d("");try{let e=await fetch("/api/orders?page=".concat(c,"&limit=10"));if(!e.ok)throw Error("Failed to fetch orders");let t=await e.json();s(t)}catch(e){d(e instanceof Error?e.message:"Failed to load orders")}finally{r(!1)}},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=(0,l.useMemo)(()=>e?e.data.filter(e=>{let s="ALL"===x||e.status===x,t=e.id.toLowerCase().includes(F.toLowerCase())||e.items.some(e=>e.product.name.toLowerCase().includes(F.toLowerCase())),a=0===C.value||new Date(e.createdAt)>=new Date(Date.now()-24*C.value*36e5);return s&&t&&a}):[],[e,x,F,C]),P=(0,l.useMemo)(()=>{if(!e)return{total:0,active:0,pending:0,deliveredThisMonth:0};let s=e.pagination.total,t=e.data.filter(e=>["PENDING","PROCESSING","SHIPPED"].includes(e.status)).length;return{total:s,active:t,pending:e.data.filter(e=>"PENDING"===e.status).length,deliveredThisMonth:e.data.filter(e=>{let s=new Date(e.createdAt),t=new Date;return"DELIVERED"===e.status&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}).length}},[e]),B=e=>{o(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,a.jsx)(p.A,{children:(0,a.jsx)(g.A,{children:(0,a.jsx)("div",{className:"bg-[#FAF9F6] min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-8",children:[(0,a.jsxs)("header",{className:"bg-white rounded-3xl shadow-sm px-8 py-10 text-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white to-[#FFF8E1] opacity-60"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["Home ",(0,a.jsx)("span",{className:"text-gray-400 mx-2",children:"›"})," My Account"," ",(0,a.jsx)("span",{className:"text-gray-400 mx-2",children:"›"}),(0,a.jsx)("span",{className:"text-[#D4A017] font-medium",children:"Orders"})]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-[#1B4332] font-['Poppins',_sans-serif]",children:"My Orders"}),(0,a.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto mt-4",children:"Track, manage, and review all your orders with real-time updates, delivery estimates, and action shortcuts."})]})]}),t?(0,a.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,a.jsx)(v.h,{size:"lg"})}):n?(0,a.jsx)(b.Zp,{className:"bg-white/90 border border-amber-100 shadow-sm",children:(0,a.jsxs)(b.Wu,{className:"p-10 text-center space-y-4",children:[(0,a.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-amber-50 text-amber-500 text-2xl",children:"⚠️"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-[#1B4332]",children:"We couldn’t load your orders yet"}),(0,a.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"If you haven’t placed any orders, this space will stay empty until your first purchase is completed. Otherwise, please refresh to try again."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,a.jsx)(j.A,{onClick:S,children:"Refresh Orders"}),(0,a.jsx)(i(),{href:"/products",children:(0,a.jsx)(j.A,{variant:"outline",children:"Start Shopping"})})]})]})}):e&&e.data.length>0?(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsx)("section",{className:"bg-white rounded-3xl p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(w).map(s=>{let[t,l]=s;return(0,a.jsxs)("button",{onClick:()=>A(t),className:"px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-all ".concat(x===t?"bg-[#D4A017] text-white shadow-md":"bg-[#F5F5F5] text-gray-700 hover:bg-[#EDE7DC]"),children:[l.icon,l.label,"ALL"!==t&&(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-500",children:e.data.filter(e=>e.status===t).length})]},t)})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[240px] relative",children:[(0,a.jsx)(h.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"search",placeholder:"Search by Order ID or product",value:F,onChange:e=>D(e.target.value),className:"w-full rounded-2xl border border-gray-200 bg-[#F7F7F7] py-3 pl-12 pr-4 text-sm focus:border-[#D4A017] focus:outline-none"})]}),(0,a.jsxs)("div",{className:"min-w-[180px] relative",children:[(0,a.jsx)(u,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("select",{value:C.value,onChange:e=>{let s=y.find(s=>s.value===Number(e.target.value));s&&L(s)},className:"w-full rounded-2xl border border-gray-200 bg-white py-3 pl-12 pr-10 text-sm appearance-none focus:border-[#D4A017] focus:outline-none",children:y.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]})}),(0,a.jsx)("section",{className:"grid gap-6 md:grid-cols-4",children:[{label:"Total Orders",value:P.total},{label:"Active Orders",value:P.active},{label:"Pending",value:P.pending},{label:"Delivered this month",value:P.deliveredThisMonth}].map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 text-center border-l-4 border-[#D4A017] shadow-sm",style:{animation:"fadeInUp 0.4s ease ".concat(.05*s,"s")},children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold text-[#1B4332] mt-2",children:e.value})]},e.label))}),(0,a.jsx)("section",{"aria-label":"Orders list",className:"space-y-6",children:e?0===O.length?(0,a.jsx)(b.Zp,{className:"bg-white/80 backdrop-blur",children:(0,a.jsxs)(b.Wu,{className:"flex flex-col items-center text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-[#FFF8E1] flex items-center justify-center mb-6 text-3xl",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-2xl font-semibold text-[#1B4332]",children:"No Orders Match Your Filters"}),(0,a.jsx)("p",{className:"text-gray-600 mt-3 mb-6 max-w-md",children:"Try adjusting your search or filter criteria to see more orders."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(j.A,{variant:"outline",onClick:()=>{A("ALL"),D(""),L(y[1])},children:"Clear Filters"}),(0,a.jsx)(j.A,{onClick:()=>A("ALL"),variant:"primary",children:"View All Orders"})]})]})}):(0,a.jsx)("div",{className:"space-y-6",children:O.map((e,s)=>{var t,l,r,n,d,c,o;return(0,a.jsxs)(b.Zp,{className:"border-l-4 ".concat((null==(t=w[e.status])?void 0:t.badge.includes("#E65100"))?"border-[#FF9800]":(null==(l=w[e.status])?void 0:l.badge.includes("#1565C0"))?"border-[#2196F3]":(null==(r=w[e.status])?void 0:r.badge.includes("#7B1FA2"))?"border-[#9C27B0]":(null==(n=w[e.status])?void 0:n.badge.includes("#2E7D32"))?"border-[#43A047]":(null==(d=w[e.status])?void 0:d.badge.includes("#C62828"))?"border-[#E53935]":"border-[#D4A017]"," shadow-sm hover:shadow-xl transition-all duration-300"),style:{animation:"fadeIn 0.4s ease ".concat(.05*s,"s")},children:[(0,a.jsx)(b.aR,{className:"pb-0",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm text-[#8C7D6B] flex items-center gap-2",children:[(0,a.jsx)(i(),{href:"/",className:"text-[#D4A017] hover:underline",children:"Home"}),(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"My Orders"}),(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["#",e.id.slice(-8).toUpperCase()]})]}),(0,a.jsxs)("h3",{className:"text-xl font-semibold text-[#1B4332] mt-2",id:"order-".concat(e.id),children:["Order #",e.id.slice(-8).toUpperCase()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Placed on ",k(e.createdAt.toString())]})]}),(0,a.jsxs)("div",{className:"text-right space-y-2",children:[(e=>{let s=w[e];return s?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ".concat(s.badge),children:[s.icon,s.label]}):null})(e.status),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.items.length," ",1===e.items.length?"item":"items"]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-[#1B4332]",children:(0,f.$g)("string"==typeof e.grandTotal?parseFloat(e.grandTotal):e.grandTotal)})]})]})}),(0,a.jsxs)(b.Wu,{className:"space-y-6 pt-6",children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[e.items.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"w-16 h-16 bg-[#F5F5F5] rounded-lg flex items-center justify-center text-sm font-semibold text-gray-600",children:[e.quantity,"x"]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-base font-medium text-[#1B4332]",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,f.$g)("string"==typeof e.price?parseFloat(e.price):e.price)," ","each"]})]}),(0,a.jsx)("div",{className:"text-base font-semibold text-[#1B4332]",children:(0,f.$g)(("string"==typeof e.price?parseFloat(e.price):e.price)*e.quantity)})]},e.id)),e.items.length>3&&(0,a.jsxs)("button",{className:"text-sm text-[#D4A017] font-medium hover:underline self-start",children:["+",e.items.length-3," more items"]})]}),(e=>{let s=E.findIndex(s=>s===e);return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-medium text-gray-500 uppercase tracking-wide",children:[(0,a.jsx)("span",{children:"Ordered"}),(0,a.jsx)("span",{children:"Delivered"})]}),(0,a.jsx)("div",{className:"flex items-center",children:E.map((t,l)=>{let r=l<=s||"DELIVERED"===e,i=l===E.length-1;return(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("div",{className:"h-4 w-4 rounded-full border-2 ".concat(r?"border-[#2E7D32] bg-[#E8F5E9]":"border-gray-300 bg-white")}),!i&&(0,a.jsx)("div",{className:"h-0.5 flex-1 ".concat(r?"bg-[#2E7D32]":"bg-gray-200")})]},t)})})]})})(e.status),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"bg-[#FAF9F6] rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Delivery"}),(0,a.jsxs)("p",{className:"text-base font-semibold text-[#1B4332] mt-1",children:["Estimated:"," ",k(null!=(o=null==(c=e.updatedAt)?void 0:c.toString())?o:e.createdAt.toString())]})]}),(0,a.jsxs)("div",{className:"bg-[#FAF9F6] rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Shipping"}),(0,a.jsx)("p",{className:"text-base font-semibold text-[#1B4332] mt-1",children:"Kathmandu • Nepal"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 justify-between items-center border-t border-dashed border-gray-200 pt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Need help?"," ",(0,a.jsx)(i(),{href:"/contact",className:"font-semibold text-[#D4A017] hover:underline",children:"Contact support"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(i(),{href:"/orders/".concat(e.id),children:(0,a.jsx)(j.A,{variant:"outline",size:"sm",children:"View Details"})}),(0,a.jsx)(j.A,{variant:"outline",size:"sm",children:"Track Order"}),(0,a.jsx)(N.A,{orderId:e.id,size:"sm"}),"DELIVERED"===e.status&&(0,a.jsx)(j.A,{size:"sm",variant:"primary",children:"Reorder Items"})]})]})]})]},e.id)})}):null}),e.pagination.totalPages>1&&(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing page ",c," of ",e.pagination.totalPages]}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white rounded-full px-4 py-2 shadow-sm",children:[(0,a.jsx)(j.A,{variant:"outline",size:"sm",disabled:1===c,onClick:()=>B(c-1),children:"Previous"}),Array.from({length:e.pagination.totalPages},(e,s)=>s+1).map(e=>(0,a.jsx)(j.A,{variant:c===e?"primary":"outline",size:"sm",onClick:()=>B(e),children:e},e)),(0,a.jsx)(j.A,{variant:"outline",size:"sm",disabled:c===e.pagination.totalPages,onClick:()=>B(c+1),children:"Next"})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-3xl p-8 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-[#1B4332] mb-6",children:"Need Help With Your Order?"}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-3",children:[{label:"Call Us",value:"9801354245",icon:"\uD83D\uDCDE"},{label:"Email Us",value:"kalkalgroup98@gmail.com",icon:"\uD83D\uDCE7"},{label:"WhatsApp",value:"9801354245",icon:"\uD83D\uDCAC"}].map(e=>(0,a.jsxs)("div",{className:"bg-[#FAF9F6] rounded-2xl p-6 text-center shadow-inner",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:e.icon}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[#1B4332]",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.value})]},e.label))}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mt-6",children:[(0,a.jsx)(j.A,{variant:"outline",children:"View FAQ"}),(0,a.jsx)(j.A,{variant:"outline",children:"Return Policy"})]})]})]}):(0,a.jsx)(b.Zp,{children:(0,a.jsxs)(b.Wu,{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-[#FFF8E1] rounded-2xl flex items-center justify-center text-4xl",children:"\uD83D\uDCE6"}),(0,a.jsx)("h2",{className:"text-3xl font-semibold text-[#1B4332] mb-3",children:"No Orders Yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6 max-w-lg mx-auto",children:"You haven't placed any orders yet. Start shopping to see your purchases here!"}),(0,a.jsx)(i(),{href:"/products",children:(0,a.jsx)(j.A,{size:"lg",variant:"primary",children:"Browse Products"})})]})})]})})})})}}},e=>{e.O(0,[6447,9885,7640,9851,378,2313,1852,4425,3575,7358],()=>e(e.s=59353)),_N_E=e.O()}]);