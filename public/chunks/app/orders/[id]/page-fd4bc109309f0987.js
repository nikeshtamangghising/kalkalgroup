(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6040],{14789:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(49095),l=t(28175),a=t(46944),i=t(76447),n=t.n(i),d=t(59851),c=t(33690),o=t(60596),x=t(8327),m=t(38092),h=t(90856),u=t(20971),p=t(43877),j=t(36364),g=t(86948),f=t(3998),N=t(78334),y=t(84011),v=t(95244),b=t(87110);function w(e){var s,t,i,w,k,A;let{params:E}=e,C=(0,a.useRouter)(),[L,D]=(0,l.useState)(null),[S,P]=(0,l.useState)(!0),[I,R]=(0,l.useState)(""),[O,M]=(0,l.useState)(!1),[F,V]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{V(await E)})()},[E]),(0,l.useEffect)(()=>{F&&W()},[F]);let W=async()=>{if(F){P(!0),R("");try{let e=await fetch("/api/orders/".concat(F.id));if(!e.ok)if(404===e.status)throw Error("Order not found");else if(403===e.status)throw Error("Access denied");else throw Error("Failed to fetch order");let s=await e.json();D(s)}catch(e){R(e instanceof Error?e.message:"Failed to load order")}finally{P(!1)}}},q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=()=>L?L.items.reduce((e,s)=>e+("string"==typeof s.price?parseFloat(s.price):s.price)*s.quantity,0):0,B=()=>.13*z(),U=()=>z()>=2e3?0:200;if(S)return(0,r.jsx)(p.A,{children:(0,r.jsx)(j.A,{children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,r.jsx)(N.h,{size:"lg"})})})})});if(I||!L)return(0,r.jsx)(p.A,{children:(0,r.jsx)(j.A,{children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsx)(g.Zp,{children:(0,r.jsxs)(g.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:I||"Order not found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Order not found"===I?"The order you're looking for doesn't exist or has been removed.":"Access denied"===I?"You don't have permission to view this order.":"There was an error loading the order details."}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(f.A,{onClick:()=>C.back(),children:"Go Back"}),(0,r.jsx)(n(),{href:"/orders",children:(0,r.jsx)(f.A,{variant:"outline",children:"View All Orders"})})]})]})})})})});let $=(e=>{switch(e){case"PENDING":return{icon:(0,r.jsx)(c.A,{className:"h-6 w-6 text-yellow-500"}),color:"bg-yellow-100 text-yellow-800",description:"Your order is being processed"};case"PAID":return{icon:(0,r.jsx)(o.A,{className:"h-6 w-6 text-blue-500"}),color:"bg-blue-100 text-blue-800",description:"Payment confirmed, preparing for shipment"};case"FULFILLED":return{icon:(0,r.jsx)(x.A,{className:"h-6 w-6 text-green-500"}),color:"bg-green-100 text-green-800",description:"Your order has been shipped"};case"CANCELLED":return{icon:(0,r.jsx)(m.A,{className:"h-6 w-6 text-red-500"}),color:"bg-red-100 text-red-800",description:"This order has been cancelled"};default:return{icon:(0,r.jsx)(c.A,{className:"h-6 w-6 text-gray-500"}),color:"bg-gray-100 text-gray-800",description:"Order status unknown"}}})(L.status),T=z(),H=B(),Z=U(),G=L.shippingAddress||null;return(0,r.jsx)(p.A,{children:(0,r.jsx)(j.A,{children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(n(),{href:"/orders",className:"inline-flex items-center text-indigo-600 hover:text-indigo-500 mb-4",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Back to Orders"]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",L.id.slice(-8).toUpperCase()]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Placed on ",q(L.createdAt.toString())]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[$.icon,(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat($.color),children:L.status})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:$.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,r.jsxs)(g.Zp,{children:[(0,r.jsx)(g.aR,{children:(0,r.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Order Items (",L.items.length,")"]})}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"space-y-6",children:L.items.map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center space-x-4 pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(d.default,{src:e.product.thumbnailUrl||"/placeholder-product.jpg",alt:e.product.name,width:80,height:80,className:"w-20 h-20 rounded-md object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:(0,r.jsx)(n(),{href:"/products/".concat(e.product.slug),className:"hover:text-indigo-600",children:e.product.name})}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:(null==(s=e.product.category)?void 0:s.name)||"Unknown Category"}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["Qty: ",e.quantity]}),(0,r.jsxs)("span",{children:["Price: ",(0,b.$g)("string"==typeof e.price?parseFloat(e.price):e.price)]})]})]}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,b.$g)(("string"==typeof e.price?parseFloat(e.price):e.price)*e.quantity)})]},e.id)})})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(g.Zp,{children:[(0,r.jsx)(g.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Customer Information"}),"PENDING"===L.status&&(0,r.jsx)("button",{onClick:()=>M(!0),className:"text-indigo-600 hover:text-indigo-500",title:"Edit shipping address",children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})}),(0,r.jsx)(g.Wu,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:(null==(t=L.user)||null==(s=t.name)?void 0:s.charAt(0).toUpperCase())||"?"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(null==(i=L.user)?void 0:i.name)||"Unknown User"}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:(null==(w=L.user)?void 0:w.role)||"Customer"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:(null==(k=L.user)?void 0:k.email)||"No email"}),(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:(0,r.jsxs)("p",{children:["Customer since: ",(null==(A=L.user)?void 0:A.createdAt)?new Date(L.user.createdAt).toLocaleDateString():"Unknown"]})})]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Shipping Address"]}),"PENDING"===L.status&&(0,r.jsx)("button",{onClick:()=>M(!0),className:"text-sm text-indigo-600 hover:text-indigo-500 font-medium",children:"Edit Address"})]}),O?(0,r.jsx)(y.A,{orderId:L.id,initialAddress:G,onSave:e=>{L&&(D({...L,shippingAddress:e}),M(!1))},onCancel:()=>M(!1)}):G?(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 text-lg",children:G.fullName}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Primary"})]}),(0,r.jsxs)("div",{className:"space-y-1 text-gray-700",children:[(0,r.jsx)("p",{className:"font-medium",children:G.address}),(0,r.jsxs)("p",{children:[G.city,", ",G.postalCode]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:G.country||"Nepal"})]}),(0,r.jsx)("div",{className:"pt-2 border-t border-blue-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[G.phone&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),G.phone]}),G.email&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),G.email]})]})})]})}):(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"No shipping address provided"})]}),(0,r.jsx)("p",{className:"text-yellow-700 text-sm mt-1",children:"Contact customer for delivery address"})]})]})]})})]}),(0,r.jsxs)(g.Zp,{children:[(0,r.jsx)(g.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Summary"}),(0,r.jsxs)("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[L.items.length," ",1===L.items.length?"item":"items"]})]})}),(0,r.jsx)(g.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-3",children:L.items.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.product.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity," \xd7 ",(0,b.$g)("string"==typeof e.price?parseFloat(e.price):e.price)]})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(0,b.$g)(("string"==typeof e.price?parseFloat(e.price):e.price)*e.quantity)})]},e.id))}),(0,r.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",L.items.length," ",1===L.items.length?"item":"items",")"]}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:(0,b.$g)(T)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping"}),0===Z&&(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded-full",children:"Free"})]}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:0===Z?(0,r.jsx)("span",{className:"text-green-600 font-semibold",children:"Free"}):(0,b.$g)(Z)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax (13% VAT)"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:(0,b.$g)(H)})]}),Z>0&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-blue-800 font-medium",children:["Add ",(0,b.$g)(2e3-T)," more for free shipping"]}),(0,r.jsx)("div",{className:"w-20 bg-blue-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(T/2e3*100,100),"%")}})})]})})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:(0,b.$g)((()=>{let e=z();return e+B()+U()})())}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"NPR (Nepalese Rupees)"})]})]})}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Payment Method:"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Cash on Delivery"})]})})]})})]}),(0,r.jsxs)(g.Zp,{children:[(0,r.jsx)(g.aR,{children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Details"})}),(0,r.jsx)(g.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,r.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Order ID:"]}),(0,r.jsx)("span",{className:"font-mono text-gray-900 bg-gray-100 px-2 py-1 rounded",children:L.id.slice(-8).toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,r.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Payment Method:"]}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Cash on Delivery"})]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Order Timeline"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Order Placed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:q(L.createdAt.toString())})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat(["PAID","PROCESSING","SHIPPED","DELIVERED"].includes(L.status)?"bg-green-100":"bg-gray-100"),children:(0,r.jsx)("svg",{className:"w-4 h-4 ".concat(["PAID","PROCESSING","SHIPPED","DELIVERED"].includes(L.status)?"text-green-600":"text-gray-400"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Payment Confirmed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PAID"===L.paymentStatus?"Payment confirmed":"Cash on delivery"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat(["SHIPPED","DELIVERED"].includes(L.status)?"bg-green-100":"bg-gray-100"),children:(0,r.jsx)("svg",{className:"w-4 h-4 ".concat(["SHIPPED","DELIVERED"].includes(L.status)?"text-green-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Order Shipped"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Preparing for shipment"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("DELIVERED"===L.status?"bg-green-100":"bg-gray-100"),children:(0,r.jsx)("svg",{className:"w-4 h-4 ".concat("DELIVERED"===L.status?"text-green-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Delivered"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"DELIVERED"===L.status?"Order completed":"Pending delivery"})]})]})]})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:q(L.updatedAt.toString())})]})})]})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:["DELIVERED"===L.status&&(0,r.jsx)(f.A,{className:"w-full",children:"Reorder Items"}),(0,r.jsx)(v.A,{orderId:L.id,variant:"outline",size:"md",className:"w-full",showText:!0}),(0,r.jsx)(n(),{href:"/contact",className:"block",children:(0,r.jsx)(f.A,{variant:"outline",className:"w-full",children:"Contact Support"})})]})]})]})]})})})}},20971:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(28175);let l=r.forwardRef(function(e,s){let{title:t,titleId:l,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},a),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},65142:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(49095),l=t(28175),a=t(2821);let i=(0,l.forwardRef)((e,s)=>{let{className:t,label:l,error:i,helperText:n,id:d,...c}=e,o=d||"input-".concat(Math.random().toString(36).substr(2,9));return(0,r.jsxs)("div",{className:"w-full",children:[l&&(0,r.jsx)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-1",children:l}),(0,r.jsx)("input",{id:o,className:(0,a.$)("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",i&&"border-red-300 focus:ring-red-500 focus:border-red-500",t),ref:s,...c}),i&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i}),n&&!i&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});i.displayName="Input";let n=i},75826:(e,s,t)=>{Promise.resolve().then(t.bind(t,14789))},84011:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(49095),l=t(28175),a=t(65142),i=t(3998),n=t(86948);function d(e){let{orderId:s,initialAddress:t,onSave:d,onCancel:c}=e,[o,x]=(0,l.useState)({fullName:(null==t?void 0:t.fullName)||"",email:(null==t?void 0:t.email)||"",phone:(null==t?void 0:t.phone)||"",address:(null==t?void 0:t.address)||"",city:(null==t?void 0:t.city)||"",postalCode:(null==t?void 0:t.postalCode)||""}),[m,h]=(0,l.useState)({}),[u,p]=(0,l.useState)(!1),j=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t})),m[s]&&h(e=>{let t={...e};return delete t[s],t})},g=async e=>{if(e.preventDefault(),(()=>{let e={};return o.fullName.trim()||(e.fullName="Full name is required"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Invalid email address"):e.email="Email is required",o.address.trim()||(e.address="Address is required"),o.city.trim()||(e.city="City is required"),o.postalCode.trim()||(e.postalCode="Postal code is required"),h(e),0===Object.keys(e).length})()){p(!0);try{let e=await fetch("/api/orders/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({shippingAddress:o})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update shipping address")}let t=await e.json();d(t.order.shippingAddress)}catch(e){alert(e instanceof Error?e.message:"Failed to update shipping address")}finally{p(!1)}}};return(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Edit Shipping Address"})}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsx)(a.A,{label:"Full Name",name:"fullName",value:o.fullName,onChange:j,error:m.fullName,required:!0}),(0,r.jsx)(a.A,{label:"Email",name:"email",type:"email",value:o.email,onChange:j,error:m.email,required:!0}),(0,r.jsx)(a.A,{label:"Phone (Optional)",name:"phone",value:o.phone||"",onChange:j,error:m.phone}),(0,r.jsx)(a.A,{label:"Address",name:"address",value:o.address,onChange:j,error:m.address,required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(a.A,{label:"City",name:"city",value:o.city,onChange:j,error:m.city,required:!0}),(0,r.jsx)(a.A,{label:"Postal Code",name:"postalCode",value:o.postalCode,onChange:j,error:m.postalCode,required:!0})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,r.jsx)(i.A,{type:"submit",disabled:u,className:"flex-1",children:u?"Saving...":"Save Address"}),(0,r.jsx)(i.A,{type:"button",variant:"outline",onClick:c,disabled:u,className:"flex-1",children:"Cancel"})]})]})})]})}},90856:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(28175);let l=r.forwardRef(function(e,s){let{title:t,titleId:l,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},a),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))})}},e=>{e.O(0,[6447,9885,7640,9851,378,2313,1852,4425,3575,7358],()=>e(e.s=75826)),_N_E=e.O()}]);