(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},18943:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,34097,23)),Promise.resolve().then(r.t.bind(r,13673,23)),Promise.resolve().then(r.bind(r,74591)),Promise.resolve().then(r.bind(r,29079)),Promise.resolve().then(r.bind(r,23082)),Promise.resolve().then(r.bind(r,94361))},23082:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(49095),o=r(89885);function i(e){let{children:t,session:r}=e;return(0,n.jsx)(o.SessionProvider,{session:r,children:t})}},25959:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var n=r(28175);let o=e=>{let t,r=new Set,n=(e,n)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=n?n:"object"!=typeof o||null===o)?o:Object.assign({},t,o),r.forEach(r=>r(t,e))}},o=()=>t,i={setState:n,getState:o,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(n,o,i);return i},i=e=>{let t=(e=>e?o(e):o)(e),r=e=>(function(e,t=e=>e){let r=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?i(e):i},29079:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(49095),o=r(28175);let i=(0,o.memo)(e=>{let{enabled:t=!1,onMetrics:r}=e,[i,l]=(0,o.useState)({});return((0,o.useEffect)(()=>{if(!t)return;try{(()=>{try{let e=performance.getEntriesByName("first-contentful-paint")[0];if(e){let t=e.startTime;l(e=>({...e,fcp:t})),null==r||r({fcp:t})}let t=performance.getEntriesByType("navigation")[0];if(t){let e=t.responseStart-t.requestStart;l(t=>({...t,ttfb:e})),null==r||r({ttfb:e})}}catch(e){console.warn("Error measuring web vitals:",e)}})()}catch(e){console.warn("Error initializing web vitals measurement:",e)}let e=(()=>{try{let e=new PerformanceObserver(e=>{try{let t=e.getEntries(),n=t[t.length-1];if(n){let e=n.startTime;l(t=>({...t,lcp:e})),null==r||r({lcp:e})}}catch(e){console.warn("Error in LCP observer callback:",e)}});return e.observe({entryTypes:["largest-contentful-paint"]}),e}catch(e){return console.warn("Error setting up LCP observer:",e),{disconnect:()=>{}}}})(),n=(()=>{try{let e=new PerformanceObserver(e=>{try{e.getEntries().forEach(e=>{let t=e.processingStart-e.startTime;l(e=>({...e,fid:t})),null==r||r({fid:t})})}catch(e){console.warn("Error in FID observer callback:",e)}});return e.observe({entryTypes:["first-input"]}),e}catch(e){return console.warn("Error setting up FID observer:",e),{disconnect:()=>{}}}})(),o=(()=>{try{let e=0,t=new PerformanceObserver(t=>{try{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value,l(t=>({...t,cls:e})),null==r||r({cls:e}))})}catch(e){console.warn("Error in CLS observer callback:",e)}});return t.observe({entryTypes:["layout-shift"]}),t}catch(e){return console.warn("Error setting up CLS observer:",e),{disconnect:()=>{}}}})();return()=>{try{null==e||e.disconnect(),null==n||n.disconnect(),null==o||o.disconnect()}catch(e){console.warn("Error cleaning up performance observers:",e)}}},[t,r]),(0,o.useEffect)(()=>{t&&Object.keys(i).length>0&&(console.group("\uD83D\uDE80 Performance Metrics"),i.fcp&&console.log("First Contentful Paint: ".concat(i.fcp.toFixed(2),"ms")),i.lcp&&console.log("Largest Contentful Paint: ".concat(i.lcp.toFixed(2),"ms")),i.fid&&console.log("First Input Delay: ".concat(i.fid.toFixed(2),"ms")),i.cls&&console.log("Cumulative Layout Shift: ".concat(i.cls.toFixed(4))),i.ttfb&&console.log("Time to First Byte: ".concat(i.ttfb.toFixed(2),"ms")),console.groupEnd())},[i,t]),t)?(0,n.jsxs)("div",{className:"fixed bottom-4 right-4 bg-black bg-opacity-80 text-white p-3 rounded-lg text-xs font-mono z-50 max-w-xs",children:[(0,n.jsx)("div",{className:"font-bold mb-2",children:"Performance Metrics"}),i.fcp&&(0,n.jsxs)("div",{className:"mb-1 ".concat(i.fcp>2500?"text-red-400":i.fcp>1800?"text-yellow-400":"text-green-400"),children:["FCP: ",i.fcp.toFixed(0),"ms"]}),i.lcp&&(0,n.jsxs)("div",{className:"mb-1 ".concat(i.lcp>4e3?"text-red-400":i.lcp>2500?"text-yellow-400":"text-green-400"),children:["LCP: ",i.lcp.toFixed(0),"ms"]}),i.fid&&(0,n.jsxs)("div",{className:"mb-1 ".concat(i.fid>300?"text-red-400":i.fid>100?"text-yellow-400":"text-green-400"),children:["FID: ",i.fid.toFixed(0),"ms"]}),i.cls&&(0,n.jsxs)("div",{className:"mb-1 ".concat(i.cls>.25?"text-red-400":i.cls>.1?"text-yellow-400":"text-green-400"),children:["CLS: ",i.cls.toFixed(3)]}),i.ttfb&&(0,n.jsxs)("div",{className:"".concat(i.ttfb>800?"text-red-400":i.ttfb>600?"text-yellow-400":"text-green-400"),children:["TTFB: ",i.ttfb.toFixed(0),"ms"]})]}):null});i.displayName="PerformanceMonitor";let l=i},34097:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}},57649:(e,t,r)=>{"use strict";r.d(t,{x:()=>l});var n=r(25959),o=r(89863);let i={getItem:e=>{let t=localStorage.getItem(e);if(!t)return null;try{return JSON.parse(t),t}catch(e){return null}},setItem:(e,t)=>{localStorage.setItem(e,t)},removeItem:e=>{localStorage.removeItem(e)}},l=(0,n.v)()((0,o.Zr)((e,t)=>({items:[],isOpen:!1,addItem:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=JSON.parse(JSON.stringify(t));e(e=>{let t=n.id,o=e.items.findIndex(e=>e.productId===t);if(-1===o)return{items:[...e.items,{productId:t,quantity:r,product:n}]};{let t=[...e.items];return t[o]={...t[o],quantity:t[o].quantity+r},{items:t}}})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.productId!==t)}))},updateQuantity:(r,n)=>{if(n<=0)return void t().removeItem(r);e(e=>{let t=e.items.findIndex(e=>e.productId===r);if(-1!==t){let r=[...e.items];return r[t]={...r[t],quantity:n},{items:r}}return{items:e.items}})},clearCart:()=>{e({items:[]})},openCart:()=>{e({isOpen:!0})},closeCart:()=>{e({isOpen:!1})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+Number(t.product.discountPrice||t.product.price)*t.quantity,0),getItemQuantity:e=>{let r=t().items.find(t=>t.productId===e);return r?r.quantity:0}}),{name:"cart-storage",storage:(0,o.KU)(()=>i),partialize:e=>({items:e.items}),onRehydrateStorage:()=>e=>{},migrate:(e,t)=>{if(!e||"object"!=typeof e)return e;if(e.items){let t=e.items.map(e=>{if((null==e?void 0:e.product)&&"object"==typeof e.product){let t=JSON.parse(JSON.stringify(e.product));return{...e,product:t,productId:e.productId||t.id}}return e});return{...e,items:t}}return e}}))},74591:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(28175);function o(){return(0,n.useEffect)(()=>{window.addEventListener("unhandledrejection",e=>{var t,r;let n=(null==(t=e.reason)?void 0:t.message)||"",o=(null==(r=e.reason)?void 0:r.code)||"";if(n.includes("Loading chunk")||n.includes("chunk")||"CHUNK_LOAD_ERROR"===o||n.includes("Cannot read properties of undefined (reading 'call')")||n.includes("undefined")&&n.includes("call")){console.warn("Chunk loading error detected, reloading page:",e.reason),e.preventDefault(),window.location.reload();return}e.reason||(console.warn("Unhandled promise rejection with no reason, reloading page"),e.preventDefault(),window.location.reload())}),window.addEventListener("error",e=>{var t;let r=(null==(t=e.error)?void 0:t.message)||"";(r.includes("Loading chunk")||r.includes("chunk")||r.includes("Cannot read properties of undefined (reading 'call')")||r.includes("undefined")&&r.includes("call"))&&(console.warn("Chunk error detected, reloading page:",e.error),e.preventDefault(),window.location.reload())})},[]),null}},89863:(e,t,r)=>{"use strict";function n(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let o=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(n=r.getItem(e))?n:null;return i instanceof Promise?i.then(o):o(i)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}r.d(t,{KU:()=>n,Zr:()=>i});let o=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>o(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}},i=(e,t)=>(r,i,l)=>{let s,a={storage:n(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,u=new Set,d=new Set,m=a.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...e)},i,l);let f=()=>{let e=a.partialize({...i()});return m.setItem(a.name,{state:e,version:a.version})},p=l.setState;l.setState=(e,t)=>(p(e,t),f());let v=e((...e)=>(r(...e),f()),i,l);l.getInitialState=()=>v;let g=()=>{var e,t;if(!m)return;c=!1,u.forEach(e=>{var t;return e(null!=(t=i())?t:v)});let n=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=i())?e:v))||void 0;return o(m.getItem.bind(m))(a.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];else{if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[n,o]=e;if(r(s=a.merge(o,null!=(t=i())?t:v),!0),n)return f()}).then(()=>{null==n||n(s,void 0),s=i(),c=!0,d.forEach(e=>e(s))}).catch(e=>{null==n||n(void 0,e)})};return l.persist={setOptions:e=>{a={...a,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>c,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},a.skipHydration||g(),s||v}},94361:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>s,_:()=>a});var n=r(49095),o=r(28175),i=r(57649);let l=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(!1),[a,c]=(0,o.useState)(null),{addItem:u}=(0,i.x)(),d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s(!0),c(null);try{let r=JSON.parse(JSON.stringify(e)),n=await fetch("/api/products/".concat(r.id));if(!n.ok)throw Error("Product not found");let o=await n.json();if(!o.isActive)throw Error("This product is no longer available");if(o.inventory<t)throw Error("Only ".concat(o.inventory," items available"));return u(o,t),!0}catch(e){return c(e instanceof Error?e.message:"Failed to add item to cart"),!1}finally{s(!1)}};return(0,o.useEffect)(()=>{if(!a)return;let e=setTimeout(()=>c(null),5e3);return()=>clearTimeout(e)},[a]),(0,n.jsx)(l.Provider,{value:{addToCart:d,isLoading:r,error:a},children:t})}function a(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},e=>{e.O(0,[3063,2978,9885,3575,7358],()=>e(e.s=18943)),_N_E=e.O()}]);